!function(a,b){function c(){}function d(a,b){FB.ui({method:"stream.publish",display:"popup",message:"",name:"Tjilp",caption:"Check out my score!",description:"I got "+b+" stars on level "+a,link:"http://tjilp.be",picture:"http://jnthn.be/GAP/img/tjilp-score.png"},function(a){a&&a.post_id?console.log("Post was published"):console.log("Post NOT published")})}b["true"]=a;var e=function(){function a(c){d=this,a.COIN_REMOVED="COIN_REMOVED",this.gameData=c,this.view=new createjs.Container,this.leafs=[],this.obstacles=[],this.clouds=[],this.trees=[],this.backgrounds=[],this.timeCoins=[],this.nests=[],$(this.view).on("tick",$.proxy(b,this))}function b(){null!=d.bird&&(d.view.y=d.bird.view.y<80?-d.bird.view.y+80:0)}function c(a){var b=K.canvas.height-a;return b}var d;return a.prototype.showSpacebarInstruction=function(){null==this.spacebar_instruction?(this.spacebar_instruction=new createjs.Bitmap(N.getResult("assets/common/press_spacebar.png")),this.spacebar_instruction.regX=185,this.spacebar_instruction.regY=105.5,this.spacebar_instruction.x=500,this.spacebar_instruction.y=300,this.view.addChild(this.spacebar_instruction),this.spacebar_instruction.alpha=0,createjs.Tween.get(this.spacebar_instruction).to({alpha:1},400)):this.removeSpacebarInstruction()},a.prototype.removeSpacebarInstruction=function(){null!==this.spacebar_instruction&&createjs.Tween.get(this.spacebar_instruction).to({alpha:0},400).call(function(){d.view.removeChild(d.spacebar_instruction),d.spacebar_instruction=null})},a.prototype.createBackground=function(a){var b=new f(a);this.view.addChild(b.view),this.backgrounds.push(b)},a.prototype.createGround=function(a,b,c,d,e){this.ground=new m(a,b,c,d,e),this.view.addChild(this.ground.view)},a.prototype.createRock=function(a,b,d,e,f){var g=new q(a,b,c(d),e,f);this.view.addChild(g.view),this.obstacles.push(g)},a.prototype.createLeaf=function(a,b,d,e){var f=new n(a,c(b),58,6.5,d,e);this.view.addChild(f.view),this.leafs.push(f)},a.prototype.createBird=function(a,b){this.bird=new h(a,c(b),40,40),this.view.addChild(this.bird.view)},a.prototype.createNest=function(a,b,d){null==a&&(a=K.canvas.width-20);var e=new p(a,c(b),30,12,d);"true"!==d&&(this.nest=e),this.view.addChild(e.view),this.nests.push(e)},a.prototype.createTornado=function(a,b,d){var e=new t(a,b,c(d),120,230);this.view.addChild(e.view),this.obstacles.push(e)},a.prototype.createCloud=function(a,b,d){var e=new k(a,b,c(d),150,150);this.view.addChild(e.view),this.clouds.push(e)},a.prototype.createEnemyBird=function(a,b,d,e){var f=new l(a,b,c(d),e);this.view.addChild(f.view),this.obstacles.push(f)},a.prototype.createBalloon=function(a,b,d,e){var f=new g(a,b,c(d),93,157,e);this.view.addChild(f.view),this.obstacles.push(f)},a.prototype.createTree=function(a,b,c,d){var e=new u(a,b,c,d);this.view.addChild(e.view),this.trees.push(e)},a.prototype.createTimeCoin=function(a,b,d,e){var f=new s(a,c(b),d,e);this.view.addChild(f.view),this.timeCoins.push(f)},a.prototype.createMiniTree=function(a,b){var d=new o(a,b,c(0),20,245);this.view.addChild(d.view),this.obstacles.push(d)},a.prototype.createBranch=function(a,b,d){var e=new i(a,b,c(d),10,70);this.view.addChild(e.view),this.obstacles.push(e)},a.prototype.removeTimeCoinWithUserData=function(b){for(var c=0;c<this.timeCoins.length;c++){var e=this.timeCoins[c];if(e.view.body.GetUserData()===b){console.log("[GameContainer] removed timecoin"),L.DestroyBody(e.view.body),this.view.removeChild(e.view),this.timeCoins.splice(c,1);var f=new createjs.Event(a.COIN_REMOVED);d.view.dispatchEvent(f)}}},a.prototype.removeBird=function(){null!=this.bird&&(L.DestroyBody(this.bird.view.body),this.view.removeChild(this.bird.view),this.bird=null)},a.prototype.removeGround=function(){null!=this.ground&&(L.DestroyBody(this.ground.view.body),this.view.removeChild(this.ground.view),this.ground=null)},a.prototype.removeNest=function(){null!=this.nest&&(L.DestroyBody(this.nest.view.body),this.view.removeChild(this.nest.view),this.nest=null)},a.prototype.resetContainer=function(){for(var a=this.leafs.length,b=0;a>b;b++){var c=this.leafs.pop();L.DestroyBody(c.view.body),this.view.removeChild(c.view)}a=this.obstacles.length;for(var d=0;a>d;d++){var e=this.obstacles.pop();L.DestroyBody(e.view.body),this.view.removeChild(e.view)}a=this.clouds.length;for(var f=0;a>f;f++){var g=this.clouds.pop();L.DestroyBody(g.view.body),this.view.removeChild(g.view)}a=this.trees.length;for(var h=0;a>h;h++){var i=this.trees.pop();this.view.removeChild(i.view)}a=this.backgrounds.length;for(var j=0;a>j;j++){var k=this.backgrounds.pop();this.view.removeChild(k.view)}a=this.timeCoins.length;for(var l=0;a>l;l++){var m=this.timeCoins.pop();L.DestroyBody(m.view.body),this.view.removeChild(m.view),console.log("[GameContainer] removed timecoin!"),console.log(this.timeCoins.length)}a=this.nests.length;for(var n=0;a>n;n++){var o=this.nests.pop();o.isStart||L.DestroyBody(o.view.body),this.view.removeChild(o.view)}this.removeBird(),this.removeGround()},a.prototype.parallaxLeft=function(){var a=this.backgrounds[1].view;createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({x:a.x+10},1e3)},a.prototype.parallaxRight=function(){var a=this.backgrounds[1].view;createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({x:a.x-10},1e3)},a.prototype.handleBeginContact=function(a){a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData()},a.prototype.handleEndContact=function(a){var b=a.GetFixtureA().GetBody().GetUserData(),c=a.GetFixtureB().GetBody().GetUserData();if("leaf"===b||"leaf"===c)for(var d=0;d<this.leafs.length;d++){var e=this.leafs[d];e.handleEndContact(a)}else if("cloud"===b||"cloud"===c)for(var f=0;f<this.clouds.length;f++){var g=this.clouds[f];g.handleEndContact(a)}},a}(),f=function(){function a(a){b=this,this.x=0,this.y=0,this.width=K.canvas.width,this.height=K.canvas.height,this.view=new createjs.Bitmap(a),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=K.canvas.width/2,this.view.y=K.canvas.height/2}var b;return a}(),g=function(){function a(a,d,e,f,g){c=this,this.x=d,this.y=e,this.width=f,this.height=g,this.view=new createjs.Bitmap(N.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height/2;var h=new P.b2FixtureDef;h.density=2,h.friction=.3,h.restitution=0,h.isSensor=!0;var i=new P.b2BodyDef;i.type=P.b2Body.b2_kinematicBody,i.position.x=this.x/Q,i.position.y=this.y/Q,i.userData="balloon",this.view.body=L.CreateBody(i),this.view.body.SetUserData("balloon");var j=new P.b2CircleShape(this.width/2/Q);j.m_p.Set(0,-1),h.shape=j,h.userData="balloon",this.view.body.CreateFixture(h);var k=new P.b2CircleShape(this.width/4/Q);k.m_p.Set(0,.5),h.shape=k,h.userData="balloon",this.view.body.CreateFixture(h);var l=new P.b2CircleShape(this.width/8/Q);l.m_p.Set(0,2.2),h.shape=l,h.userData="balloon",this.view.body.CreateFixture(h),this.updateView(),b(this.view)}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({y:a.y+30},1700).call(function(){createjs.Tween.get(this).to({y:this.y-30},1700).call(function(){b(this)})})}var c;return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q,this.view.y=this.view.body.GetPosition().y*Q,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),h=function(){function a(c,d,f,g){e=this,a.DIED="DIED",this.x=c,this.y=d,this.width=f,this.height=g,this.impulse=7,this.maxRotations=0,this.evolution=0,this.isDead=!1,this.view=new createjs.Container;var h={images:["assets/common/egg-spritesheet.png"],frames:{width:45,height:55},animations:{one:[0],two:[1],three:[2],four:[3],fly:[3,4,5,6]}},i=new createjs.SpriteSheet(h);this.sprite=new createjs.Sprite(i,"one"),this.view.addChild(this.sprite),this.view.regX=25.5,this.view.regY=27.5;var j=new P.b2FixtureDef;j.density=1,j.friction=1,j.restitution=0;var k=new P.b2BodyDef;k.type=P.b2Body.b2_staticBody,k.position.x=this.x/Q,k.position.y=this.y/Q,k.userData="bird",this.view.body=L.CreateBody(k),this.view.body.SetUserData("bird");var l=new P.b2CircleShape((this.width/2.3-4)/Q);l.m_p.Set(-.2,-.5),j.shape=l,j.userData="bird",this.view.body.CreateFixture(j);var m=new P.b2CircleShape(this.width/2.3/Q);m.m_p.Set(-.2,.1),j.shape=m,j.userData="bird",this.view.body.CreateFixture(j);var n=new r(this.view.x+70,this.view.y-20,r.CIRCLE,15);this.view.addChild(n.view),$(this.view).on("tick",$.proxy(b,this))}function b(){O.pauseGame||(this.view.x=this.view.body.GetPosition().x*Q-3,this.view.y=this.view.body.GetPosition().y*Q-3,this.view.rotation=this.view.body.GetAngle()*(180/Math.PI),!e.isDead&&(this.view.x>K.canvas.width||this.view.x<0||this.view.y>K.canvas.height)&&c())}function c(){var b=new createjs.Event(a.DIED);e.view.dispatchEvent(b),e.isDead=!0}function d(a,b,c){a.ApplyImpulse(new P.b2Vec2(Math.cos(b*(Math.PI/180))*c,Math.sin(b*(Math.PI/180))*c),a.GetWorldCenter())}var e;return a.prototype.die=function(){e.sprite.gotoAndStop(2)},a.prototype.push=function(){this.view.body.SetType(P.b2Body.b2_dynamicBody),d(e.view.body,-45,15),this.view.body.SetAngularVelocity(-1)},a.prototype.moveRight=function(){e.view.body.ApplyTorque(3*e.impulse),d(e.view.body,0,e.impulse),e.view.body.SetAngularVelocity(1),e.impulseAnimation(v.LEFT_DIRECTION)},a.prototype.moveLeft=function(){e.view.body.ApplyTorque(3*-e.impulse),d(e.view.body,0,-e.impulse),e.view.body.SetAngularVelocity(-1),e.impulseAnimation(v.RIGHT_DIRECTION)},a.prototype.fly=function(){2===this.evolution&&(e.view.body.SetLinearDamping(10),d(e.view.body,-90,e.impulse),this.sprite.gotoAndPlay("fly"),setInterval(this.stopFly,2e3))},a.prototype.tornadoFly=function(){d(e.view.body,-90,40)},a.prototype.rest=function(a){this.view.body.SetType(P.b2Body.b2_staticBody),this.view.removeAllEventListeners(),console.log(this.view.rotation%90,this.view.rotation,90*(this.view.rotation%180)),createjs.Tween.get(this.view).to({rotation:360,x:a.x+35,y:a.y-20},300)},a.prototype.stopFly=function(){console.log("[BIRD] stop flying"),e.view.body.SetLinearDamping(0)},a.prototype.setEvolution=function(a){switch(this.evolution=parseInt(a),this.evolution){case 1:this.sprite.gotoAndStop("one");break;case 2:this.sprite.gotoAndStop("two");break;case 3:this.sprite.gotoAndStop("three");break;case 4:this.sprite.gotoAndStop("four");break;default:this.sprite.gotoAndStop("one")}},a.prototype.impulseAnimation=function(a){var b=new v(this.view.x+60,this.view.y,a);K.addChild(b.view)},a.prototype.setMaxRotations=function(a){this.maxRotations=a},a}(),i=function(){function a(a,b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.view=new createjs.Bitmap(N.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height;var f=new P.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=.1;var g=new P.b2BodyDef;g.type=P.b2Body.b2_staticBody,g.position.x=this.x/Q,g.position.y=this.y/Q,g.userData="branch",f.shape=new P.b2PolygonShape,f.shape.SetAsBox(this.width/Q,(this.height-20)/Q),f.userData="branch",this.view.body=L.CreateBody(g),this.view.body.CreateFixture(f),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q-9,this.view.y=this.view.body.GetPosition().y*Q+20,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),j=function(){function a(c){b=this,this.view=new createjs.Container;var d="assets/common/buttons/"+c.toLowerCase()+".png";this.clickTimeout=null,this.width=50,this.height=50,c===a.LEVELS?(this.width=87,this.height=78):c===a.NEXT_LEVEL?(this.width=99,this.height=92):c===a.PLAY_AGAIN?(this.width=83,this.height=76):c===a.FACEBOOK?(this.width=80,this.height=72):c===a.START?(this.width=70,this.height=40):c===a.START_GAME?(this.width=308,this.height=123):c===a.OPTIONS?(this.width=123,this.height=60):c===a.RESET_LEVELS?(this.width=172,this.height=54):c===a.BACK?(this.width=68,this.height=41):c===a.PAUSE?(this.width=42,this.height=41):c===a.RESUME?(this.width=81,this.height=67):c===a.PLAY_MORE&&(this.width=149,this.height=92),this.view.regX=this.width/2,this.view.regY=this.height/2,this.btn=new createjs.Bitmap(N.getResult(d)),this.view.addChild(this.btn),this.btn.regX=this.width/2,this.btn.regY=this.height/2,this.btn.addEventListener("mouseover",function(a){createjs.Tween.get(a.target).to({scaleX:1.07,scaleY:1.07},100)}),this.btn.addEventListener("mouseout",function(a){createjs.Tween.get(a.target).to({scaleX:1,scaleY:1},100)}),this.view.cursor="pointer",this.btn.scaleX=.7,this.btn.scaleY=.7,createjs.Tween.get(this.btn).to({scaleX:1,scaleY:1},1400,createjs.Ease.elasticOut)}var b;return a}();j.PLAY_AGAIN="PLAY_AGAIN",j.NEXT_LEVEL="NEXT_LEVEL",j.FACEBOOK="FACEBOOK",j.MUTE="MUTE",j.LEVELS="LEVELS",j.START="START",j.START_GAME="START_GAME",j.OPTIONS="OPTIONS",j.RESET_LEVELS="RESET_LEVELS",j.BACK="BACK",j.PAUSE="PAUSE",j.RESUME="RESUME",j.PLAY_MORE="PLAY_MORE";var k=function(){function a(a,e,f,g,h){d=this,this.x=e,this.y=f,this.width=g,this.height=h,this.view=new createjs.Bitmap(N.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height/2;var i=new P.b2FixtureDef;i.density=2,i.friction=.3,i.restitution=0,i.isSensor=!0;var j=new P.b2BodyDef;j.type=P.b2Body.b2_kinematicBody,j.position.x=this.x/Q,j.position.y=this.y/Q,j.userData="cloud",this.view.body=L.CreateBody(j),this.view.body.SetUserData("cloud");var k=new P.b2CircleShape(this.width/3.5/Q);k.m_p.Set(0,0),i.shape=k,i.userData="cloud",this.view.body.CreateFixture(i);var l=new P.b2CircleShape((this.width/3.5-15)/Q);l.m_p.Set(2,0),i.shape=l,i.userData="cloud",this.view.body.CreateFixture(i);var m=new P.b2CircleShape((this.width/3.5-10)/Q);m.m_p.Set(-2,0),i.shape=m,i.userData="cloud",this.view.body.CreateFixture(i),c=new P.b2BuoyancyController,c.normal.Set(0,-1),c.useDensity=!0,c.density=2,L.AddController(c),this.updateView(),b(this.view)}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({y:a.y+20},2300+1e3*Math.random()).call(function(){createjs.Tween.get(this).to({y:this.y-20},2300+1e3*Math.random()).call(function(){b(this)})})}var c,d;return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q-20,this.view.y=this.view.body.GetPosition().y*Q+32,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a.prototype.handleBeginContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()||c.AddBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()||c.AddBody(f)}},a.prototype.handleEndContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()&&c.RemoveBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()&&c.RemoveBody(f)}},a}(),l=function(){function a(a,c,d,e){this.x=c,this.y=d,this.width=46,this.height=32,this.view=new createjs.Container;var f={framerate:8,images:[a],frames:{width:46,height:32},animations:{fly:[0,1]}},g=new createjs.SpriteSheet(f);this.sprite=new createjs.Sprite(g,"fly"),this.view.addChild(this.sprite),this.view.regX=23,this.view.regY=16;var h=new P.b2FixtureDef;h.density=2,h.friction=.3,h.restitution=0,h.isSensor=!0;var i=new P.b2BodyDef;i.type=P.b2Body.b2_kinematicBody,i.position.x=this.x/Q,i.position.y=this.y/Q,i.userData="enemyBird",this.view.body=L.CreateBody(i),this.view.body.SetUserData("enemyBird");var j=new P.b2CircleShape(this.width/3.2/Q);j.m_p.Set(0,0),h.shape=j,h.userData="enemyBird",this.view.body.CreateFixture(h),"right"===e?(this.view.body.SetLinearVelocity(new P.b2Vec2(5,0)),this.view.scaleX=-1):this.view.body.SetLinearVelocity(new P.b2Vec2(-5,0)),$(this.view).on("tick",$.proxy(b,this))}function b(){O.pauseGame||this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q,this.view.y=this.view.body.GetPosition().y*Q,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),m=function(){function a(a,c,d,e,f){b=this;var g=50;this.x=c,this.y=d,this.width=e,this.height=f,this.view=new createjs.Bitmap(a),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=K.canvas.width/2,this.view.y=K.canvas.height-f/2;var h=new P.b2FixtureDef;h.density=1,h.friction=.5,h.restitution=0;var i=new P.b2BodyDef;i.type=P.b2Body.b2_staticBody,i.position.x=this.x/Q,i.position.y=(K.canvas.height-g)/Q,i.userData="ground",h.shape=new P.b2PolygonShape,h.shape.SetAsBox(this.width/Q,g/Q),h.userData="ground",this.view.body=L.CreateBody(i),this.view.body.CreateFixture(h)}var b;return a}(),n=function(){function a(a,c,d,e,f,g){this.x=a,this.y=c,this.width=d,this.height=e,this.rotation=f,this.restitution=null==g?1:g,this.view=new createjs.Bitmap(N.getResult("leaf")),this.view.regX=this.width,this.view.regY=this.height;var h=new P.b2FixtureDef;h.density=.1,h.friction=.4,h.restitution=this.restitution;var i=new P.b2BodyDef;i.type=P.b2Body.b2_staticBody,i.position.x=this.x/Q,i.position.y=this.y/Q,i.userData="leaf",h.shape=new P.b2PolygonShape,h.shape.SetAsBox(this.width/Q,this.height/Q),h.userData="leaf",this.view.body=L.CreateBody(i),this.view.body.CreateFixture(h),this.view.body.SetAngle(f/180*Math.PI),$(this.view).on("tick",$.proxy(b,this))}function b(){this.updateView()}var c;return a.prototype.handleBeginContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()||c.AddBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()||c.AddBody(f)}},a.prototype.handleEndContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()&&c.RemoveBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()&&c.RemoveBody(f)}},a.prototype.updateView=function(){this.view.rotation=this.view.body.GetAngle()*(180/Math.PI),this.view.x=this.view.body.GetPosition().x*Q,this.view.y=this.view.body.GetPosition().y*Q},a}(),o=function(){function a(a,b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.view=new createjs.Bitmap(N.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height;var f=new P.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=.1;var g=new P.b2BodyDef;g.type=P.b2Body.b2_staticBody,g.position.x=this.x/Q,g.position.y=this.y/Q,g.userData="miniTree",f.shape=new P.b2PolygonShape,f.shape.SetAsBox(this.width/Q,(this.height-20)/Q),f.userData="miniTree",this.view.body=L.CreateBody(g),this.view.body.CreateFixture(f),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q-50,this.view.y=this.view.body.GetPosition().y*Q,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),p=function(){function a(a,b,c,d,e){if(this.x=a,this.y=b,this.width=c,this.height=d,this.view=new createjs.Bitmap(N.getResult("nest")),this.view.regX=this.width/2,this.view.regY=this.height/2,this.isStart="true"===e?!0:!1,e)this.view.x=this.x,this.view.y=this.y;else{var f=new P.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=0;var g=new P.b2BodyDef;g.type=P.b2Body.b2_staticBody,g.position.x=this.x/Q,g.position.y=this.y/Q,g.userData="nest",f.shape=new P.b2PolygonShape,f.shape.SetAsBox(this.width/Q,this.height/Q),this.view.body=L.CreateBody(g),this.view.body.CreateFixture(f);var h=new P.b2PolygonShape;h.SetAsOrientedBox((this.width-5)/Q,3/Q,new P.b2Vec2(0,-.5)),f.shape=h,f.userData="top-nest",this.view.body.CreateFixture(f),this.updateView()}}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q-32,this.view.y=this.view.body.GetPosition().y*Q-13,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),q=function(){function a(a,b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.view=new createjs.Bitmap(N.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height/2;var f=new P.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=.1;var g=new P.b2BodyDef;g.type=P.b2Body.b2_staticBody,g.position.x=this.x/Q,g.position.y=this.y/Q,g.userData="rock";var h=d/475,i=e/358;f.shape=new P.b2PolygonShape;var j=[];j.push(new P.b2Vec2(9*-(1-h),-6*i)),j.push(new P.b2Vec2(6.3*h-9*(1-h),3.3)),j.push(new P.b2Vec2(-5.5*h-9*(1-h),3.3)),f.shape.SetAsVector(j,3),f.userData="rock",this.view.body=L.CreateBody(g),this.view.body.CreateFixture(f),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q,this.view.y=this.view.body.GetPosition().y*Q+5,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),r=function(){function a(e,f,g,h){null!=d&&null!=d.interval&&(clearInterval(d.interval),d.interval=null),d=this,this.view=new createjs.Container,this.width=27,this.height=26,this.type=g,this.maxAmount=h,this.amount=0,this.interval=null,g===a.TAIL?this.interval=setInterval(function(){b(d)},100):g===a.CIRCLE&&(this.interval=setInterval(function(){c(d)},150)),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=e-90,this.view.y=f,this.view.scaleX=this.view.scaleY=.6+.4*Math.random()}function b(a){console.log("[Sparkle] tailAnimation"),a.amount++;var b=new createjs.Bitmap(N.getResult("star-particle"));b.regX=13.5,b.regY=13.5,b.y=20*Math.random(),a.view.addChild(b);var c=50+100*Math.random();createjs.Tween.get(b).to({scaleX:0,scaleY:0,rotate:20+30*Math.random(),x:c},500).call(function(){this.parent.removeChild(this)}),a.amount>=a.maxAmount&&(clearInterval(a.interval),a.interval=null,a.view.parent.removeChild(a.view))}function c(a){console.log("[Sparkle] circle"),a.amount++;var b=new createjs.Bitmap(N.getResult("star-particle"));b.y=120*Math.random(),b.x=120*Math.random(),b.regX=13.5,b.regY=13.5,b.scaleX=b.scaleY=0,a.view.addChild(b),createjs.Tween.get(b).to({scaleX:1,scaleY:1,rotate:20+30*Math.random()},300).call(function(){this.parent.removeChild(this)}),a.amount>=a.maxAmount&&null!=a.view&&(clearInterval(a.interval),a.interval=null,a.view.parent.removeChild(a.view))}var d;return a}();r.TAIL="TAIL",r.CIRCLE="CIRCLE";var s=function(){function a(a,d,e,f){c=this,this.x=a,this.y=d,this.width=31,this.height=31,this.worth=e,this.view=new createjs.Bitmap(N.getResult("time-coin")),this.view.regX=this.width/2,this.view.regY=this.height/2;var g=new P.b2FixtureDef;g.isSensor=!0;var h=new P.b2BodyDef;h.type=P.b2Body.b2_kinematicBody,h.position.x=this.x/Q,h.position.y=this.y/Q,h.userData="timeCoin"+f,this.view.body=L.CreateBody(h),this.view.body.SetUserData("timeCoin"+f);var i=new P.b2CircleShape(this.width/2/Q);i.m_p.Set(0,0),g.shape=i,g.userData="timeCoin"+f,this.view.body.CreateFixture(g),this.updateView(),b(this.view)}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({y:a.y-10},1e3+500*Math.random()).call(function(){createjs.Tween.get(this).to({y:a.y+10},1e3+500*Math.random()).call(function(){b(this)})})}var c;return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*Q,this.view.y=this.view.body.GetPosition().y*Q,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),t=function(){function a(a,b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.view=new createjs.Bitmap(N.getResult(a)),console.log("[Tornado] pos",this.x,this.y);var f=new P.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=1,f.isSensor=!0;var g=new P.b2BodyDef;g.type=P.b2Body.b2_staticBody,g.position.x=(parseInt(this.x)+350)/Q,g.position.y=(parseInt(this.y)+340)/Q,g.userData="tornado",f.shape=new P.b2PolygonShape,f.shape.SetAsBox(this.width/Q,this.height/Q),f.userData="tornado",this.view.body=L.CreateBody(g),this.view.body.CreateFixture(f),this.view.x=b,this.view.y=c}return a.prototype.updateView=function(){},a}(),u=function(){function a(a,c,d,e){b=this,this.x=c,this.y=K.canvas.height-e/2,this.width=d,this.height=e,this.view=new createjs.Bitmap(a),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=this.x,this.view.y=this.y}var b;return a}(),v=function(){function a(c,d,e){b=this,this.view=new createjs.Bitmap(N.getResult("twirl")),this.width=11,this.height=21,this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=c-90,this.view.y=d;var f=c-110;e===a.RIGHT_DIRECTION&&(this.view.scaleX=-1,this.view.x=c-10,f=c+10),createjs.Tween.get(this.view).to({scaleX:0,scaleY:0,rotate:10,x:f},400).call(function(){this.parent.removeChild(this)})}var b;return a}();v.LEFT_DIRECTION="LEFT_DIRECTION",v.RIGHT_DIRECTION="RIGHT_DIRECTION";var w=function(){function a(d,e,f){c=this,a.LEVEL_SELECTED="LEVEL_SELECTED",this.levelIndex=d,this.starsCount=e,this.view=new createjs.Container;var g="assets/common/nest-available.png";f||(g="assets/common/nest-locked.png");var h=new createjs.Bitmap(N.getResult(g));if(this.view.addChild(h),h.y=25,null!=this.starsCount&&this.starsCount>0){var i=new createjs.Bitmap("assets/common/stars_"+this.starsCount+".png");this.view.addChild(i),i.x=12}f&&(this.view.cursor="pointer"),this.view.addEventListener("click",$.proxy(b,this))}function b(){c.view.off();var b=new createjs.Event(a.LEVEL_SELECTED,!0);b.levelIndex=this.levelIndex,c.view.dispatchEvent(b)}var c;return a}(),x=function(){function a(f,h){g=this,a.LEVELS_CLICKED="LEVELS_CLICKED",a.TIME_OUT="TIME_OUT",a.PAUSE="PAUSE",this.view=new createjs.Container,this.view.x=f,this.view.y=h,this.stars=1,this.level=0,this.bounces=0,this.leafsCount=1,this.timeCount=0,this.maxTime=59,this.statsContainer=new createjs.Container,this.view.addChild(this.statsContainer);var i=new createjs.Bitmap("assets/common/progressbar/bg.png");i.regX=127.5,i.x=K.canvas.width/2,i.y=7,this.statsContainer.addChild(i);var k={images:["assets/common/progressbar/levels_spritesheet.png"],frames:{width:74,height:28.8}},l=new createjs.SpriteSheet(k);this.levelsSprite=new createjs.Sprite(l),this.statsContainer.addChild(this.levelsSprite),this.levelsSprite.regX=33,this.levelsSprite.x=K.canvas.width/2-3,this.levelsSprite.y=22;var m={images:["assets/common/progressbar/progress_bar_spritesheet.png"],frames:{width:200,height:15}},n=new createjs.SpriteSheet(m);this.progressSprite=new createjs.Sprite(n),this.statsContainer.addChild(this.progressSprite),this.progressSprite.regX=100,this.progressSprite.x=K.canvas.width/2,this.progressSprite.y=68;var o={images:["assets/common/buttons/mute.png"],frames:{width:28.5,height:37},animations:{on:[0],mute:[1]}},p=new createjs.SpriteSheet(o);this.muteBtnSprite=new createjs.Sprite(p,"on"),this.view.addChild(this.muteBtnSprite),this.muteBtnSprite.addEventListener("click",function(){c.toggleSound(),d()});var q=new j(j.PAUSE);q.view.x=90,q.view.y=39,this.view.addChild(q.view),q.view.addEventListener("click",function(){var b=new createjs.Event(a.PAUSE);g.view.dispatchEvent(b),O.pauseGame=!0}),e(),b(),this.statsContainer.y=-200,this.statsContainer.x=-15}function b(){O.gamerData.isMusicOn?g.muteBtnSprite.gotoAndStop("on"):g.muteBtnSprite.gotoAndStop("mute")}function d(){c.playSounds?g.muteBtnSprite.gotoAndStop("on"):c.playSounds||g.muteBtnSprite.gotoAndStop("mute")}function e(){g.levelsSprite.gotoAndStop(g.level)}function f(){if(!O.pauseGame&&(g.progressSprite.gotoAndStop(Math.round(g.timeCount/g.maxTime*67)),g.timeCount--,g.timeCount<0)){clearInterval(g.timer),g.timer=null;var b=new createjs.Event(a.TIME_OUT);g.view.dispatchEvent(b)}}var g;return a.prototype.setLevel=function(a){this.level=a,e()},a.prototype.levelUp=function(){this.level++,e()},a.prototype.levelDown=function(){this.level--,e()},a.prototype.increaseBounce=function(){this.bounces++,e()},a.prototype.earnTime=function(){var a=this.maxTime/10;if(this.timeCount+a<this.maxTime){this.timeCount+=a;var b=new r(g.progressSprite.x+180*(this.timeCount/this.maxTime),g.progressSprite.y-7,r.TAIL,15);g.view.addChild(b.view)}},a.prototype.resetStats=function(){this.statsContainer.y=-200,clearInterval(this.timer),this.timer=null,this.timeCount=this.maxTime,this.timer=setInterval(f,1e3),this.bounces=0,f()},a.prototype.showStats=function(){this.statsContainer.y=-200,createjs.Tween.get(this.statsContainer).to({y:-17},700,createjs.Ease.cubicOut)},a.prototype.hideStats=function(){createjs.Tween.get(this.statsContainer).to({y:-200},700,createjs.Ease.cubicIn)},a.prototype.getStars=function(){var a=Math.round(this.timeCount/(this.maxTime-this.maxTime/15)*3);return a},a}(),y=function(){function a(){b=this,a.MENU="MENU",this.view=new createjs.Container;var c=new createjs.Bitmap(N.getResult("end-background"));this.view.addChild(c);var d=new j(j.PLAY_MORE);d.view.x=925,d.view.y=120,this.view.addChild(d.view),d.view.on("click",function(){var c=new createjs.Event(a.MENU,!0);b.view.dispatchEvent(c)})}var b;return a}(),z=function(){function a(){b=this,a.MENU="MENU",a.PLAY_AGAIN="PLAY_AGAIN",this.width=352,this.height=234,this.view=new createjs.Container,this.container=new createjs.Container,this.container.regX=this.width/2,this.container.regY=this.height/2,this.container.x=K.canvas.width/2,this.container.y=K.canvas.height/2-35;var c=new createjs.Shape;c.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),c.graphics.drawRect(0,0,K.canvas.width,K.canvas.height),c.alpha=.5,this.view.addChild(c),this.view.addChild(this.container);var d=new createjs.Bitmap(N.getResult("failed-background"));this.container.addChild(d);var e=new j(j.PLAY_AGAIN);e.view.x=305,e.view.y=this.height+21,this.container.addChild(e.view),e.view.on("click",function(){var c=new createjs.Event(a.RESTART_LEVEL,!0);b.view.dispatchEvent(c)});var f=new j(j.LEVELS);f.view.x=140,f.view.y=this.height+21,this.container.addChild(f.view),f.view.on("click",function(){var c=new createjs.Event(a.MENU,!0);b.view.dispatchEvent(c)})}var b;return a}(),A=function(){function a(c){d=this,a.INSTRUCTIONS_DONE="INSTRUCTIONS_DONE",this.instructionsData=c,this.currentInstruction=0,this.view=new createjs.Container;var e=new createjs.Shape;e.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),e.graphics.drawRect(0,0,K.canvas.width,K.canvas.height),e.alpha=.5,this.view.addChild(e),b(),this.view.cursor="pointer",this.view.addEventListener("click",function(){b()})}function b(){if(d.currentInstruction<d.instructionsData.length)c(),d.instructionImg=new createjs.Bitmap(N.getResult($(d.instructionsData[d.currentInstruction]).attr("img"))),d.view.addChild(d.instructionImg),console.log($(d.instructionsData[d.currentInstruction]).attr("img"));else{c();var b=new createjs.Event(a.INSTRUCTIONS_DONE,!0);d.view.dispatchEvent(b)}d.currentInstruction++}function c(){null!=d.instructionImg&&(d.view.removeChild(d.instructionImg),d.instructionImg=null)}var d;return a}(),B=function(){function a(){d=this,a.BACK="BACK",this.view=new createjs.Container;var e=new createjs.Bitmap(N.getResult("assets/common/bg.png"));this.view.addChild(e);var f=new j(j.BACK);this.view.addChild(f.view),f.view.x=100,f.view.y=70,f.view.addEventListener("click",function(){var b=new createjs.Event(a.BACK,!0);d.view.dispatchEvent(b)}),$("body").on("keydown",function(a){49===a.which?b(0):50===a.which?b(1):222===a.which?b(2):53===a.which?b(3):54===a.which?b(4):54===a.which?b(4):55===a.which?b(5):56===a.which?b(6):57===a.which?b(7):58===a.which?b(8):59===a.which&&b(9)}),c()}function b(a){var b=new createjs.Event(w.LEVEL_SELECTED,!0);b.levelIndex=a,d.view.dispatchEvent(b)}function c(){var a=new createjs.Container;d.view.addChild(a);for(var b=0,c=0,e=0;e<O.getLevelCount();e++){var f=!0;e<=O.gamerData.levels.length&&(f=!1);var g=new w(e,O.gamerData.levels[e],!f);g.view.x=c,g.view.y=b,c+=160,e%4>=3&&(b+=120,c=0),a.addChild(g.view)}a.x=215,a.y=100}var d;return a}(),C=function(){function a(d,e){c=this,a.NEXT_LEVEL="NEXT_LEVEL",a.PLAY_AGAIN="PLAY_AGAIN",this.screenType=H.NEXT_LEVEL,this.stars=e,this.level=d,this.width=351,this.height=233,this.view=new createjs.Container,this.container=new createjs.Container,this.container.regX=this.width/2,this.container.regY=this.height/2,this.container.x=K.canvas.width/2,this.container.y=K.canvas.height/2-35;var f=new createjs.Shape;f.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),f.graphics.drawRect(0,0,K.canvas.width,K.canvas.height),f.alpha=.5,this.view.addChild(f),this.view.addChild(this.container);var g=new createjs.Bitmap(N.getResult("success-background"));this.container.addChild(g);var h=new j(j.FACEBOOK);h.view.x=260,h.view.y=50,h.view.y=h.view.y,this.container.addChild(h.view),h.view.on("click",b);var i=new j(j.PLAY_AGAIN);i.view.x=143,i.view.y=this.height+24,this.container.addChild(i.view),i.view.on("click",function(){var b=new createjs.Event(a.PLAY_AGAIN,!0);
c.view.dispatchEvent(b)});var k=new j(j.NEXT_LEVEL);k.view.x=297,k.view.y=i.view.y+6,this.container.addChild(k.view),k.view.on("click",function(){var b=new createjs.Event(a.NEXT_LEVEL,!0);c.view.dispatchEvent(b)});var l=new w(0,e,!0);this.container.addChild(l.view),l.view.x=125,l.view.y=20}function b(){d(c.level+1,c.stars)}var c;return a}(),D=function(){function a(){a.SAVE="SAVE",a.CANCEL="CANCEL",c=this,this.view=new createjs.Container;var d=new createjs.Bitmap(N.getResult("assets/common/startpage/bg.png"));this.view.addChild(d);var e=new createjs.Bitmap(N.getResult("assets/common/startpage/boom.png"));e.y=K.canvas.height-539,this.view.addChild(e);var f=new createjs.Bitmap(N.getResult("assets/common/startpage/tjilp.png"));f.y=50,f.x=400,this.view.addChild(f);var g=new createjs.Bitmap(N.getResult("assets/common/startpage/bosjes_onderaan.png"));g.y=K.canvas.height-88,this.view.addChild(g);var h={images:["assets/common/buttons/music_spritesheet.png"],frames:{width:224.5,height:43},animations:{on:[0],mute:[1]}},i=new createjs.SpriteSheet(h);this.muteBtnSprite=new createjs.Sprite(i),this.view.addChild(this.muteBtnSprite),this.muteBtnSprite.x=614,this.muteBtnSprite.y=286,this.muteBtnSprite.regX=92,this.muteBtnSprite.regY=27,this.muteBtnSprite.scaleX=.7,this.muteBtnSprite.scaleY=.7,this.muteBtnSprite.cursor="pointer",this.muteBtnSprite.addEventListener("click",function(){O.gamerData.isMusicOn=!O.gamerData.isMusicOn,b();var d=new createjs.Event(a.SAVE,!0);c.view.dispatchEvent(d)}),createjs.Tween.get(this.muteBtnSprite).to({scaleX:1,scaleY:1},1400,createjs.Ease.elasticOut),this.muteBtnSprite.addEventListener("mouseover",function(a){createjs.Tween.get(a.target).to({scaleX:1.07,scaleY:1.07},100)}),this.muteBtnSprite.addEventListener("mouseout",function(a){createjs.Tween.get(a.target).to({scaleX:1,scaleY:1},100)});var k={images:["assets/common/buttons/soundfx_spritesheet.png"],frames:{width:224.5,height:43},animations:{on:[0],mute:[1]}},l=new createjs.SpriteSheet(k);this.fx_muteBtnSprite=new createjs.Sprite(l),this.view.addChild(this.fx_muteBtnSprite),this.fx_muteBtnSprite.x=650,this.fx_muteBtnSprite.y=354,this.fx_muteBtnSprite.regX=101,this.fx_muteBtnSprite.regY=27,this.fx_muteBtnSprite.scaleX=.7,this.fx_muteBtnSprite.scaleY=.7,this.fx_muteBtnSprite.cursor="pointer",this.fx_muteBtnSprite.addEventListener("click",function(){O.gamerData.isFxOn=!O.gamerData.isFxOn,b();var d=new createjs.Event(a.SAVE,!0);c.view.dispatchEvent(d)}),createjs.Tween.get(this.fx_muteBtnSprite).to({scaleX:1,scaleY:1},1400,createjs.Ease.elasticOut),this.fx_muteBtnSprite.addEventListener("mouseover",function(a){createjs.Tween.get(a.target).to({scaleX:1.07,scaleY:1.07},100)}),this.fx_muteBtnSprite.addEventListener("mouseout",function(a){createjs.Tween.get(a.target).to({scaleX:1,scaleY:1},100)});var m={images:["assets/common/buttons/reset_levels.png"],frames:{width:162,height:48},animations:{"default":[0],done:[1]}},n=new createjs.SpriteSheet(m);this.resetBtnSprite=new createjs.Sprite(n),this.view.addChild(this.resetBtnSprite),this.resetBtnSprite.regX=80,this.resetBtnSprite.regY=12,this.resetBtnSprite.scaleX=.7,this.resetBtnSprite.scaleY=.7,this.resetBtnSprite.x=648,this.resetBtnSprite.y=415,this.resetBtnSprite.cursor="pointer",this.resetBtnSprite.addEventListener("click",function(){var b=new createjs.Event(a.RESET_LEVELS,!0);c.view.dispatchEvent(b),c.resetBtnSprite.gotoAndStop("done")}),createjs.Tween.get(this.resetBtnSprite).to({scaleX:1,scaleY:1},1400,createjs.Ease.elasticOut),this.resetBtnSprite.addEventListener("mouseover",function(a){createjs.Tween.get(a.target).to({scaleX:1.07,scaleY:1.07},100)}),this.resetBtnSprite.addEventListener("mouseout",function(a){createjs.Tween.get(a.target).to({scaleX:1,scaleY:1},100)});var o=new j(j.BACK);this.view.addChild(o.view),o.view.x=530,o.view.y=235,o.view.addEventListener("click",function(){var b=new createjs.Event(a.CANCEL,!0);c.view.dispatchEvent(b)}),b()}function b(){O.gamerData.isMusicOn?c.muteBtnSprite.gotoAndStop("on"):c.muteBtnSprite.gotoAndStop("mute"),O.gamerData.isFxOn?c.fx_muteBtnSprite.gotoAndStop("on"):c.fx_muteBtnSprite.gotoAndStop("mute")}var c;return a}(),E=function(){function a(){b=this,a.LEVELS="LEVELS",a.RESUME="RESUME",a.PLAY_AGAIN="PLAY_AGAIN",this.width=370,this.height=211,this.view=new createjs.Container,this.container=new createjs.Container,this.container.regX=this.width/2,this.container.regY=this.height/2,this.container.x=K.canvas.width/2,this.container.y=K.canvas.height/2-35;var c=new createjs.Shape;c.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),c.graphics.drawRect(0,0,K.canvas.width,K.canvas.height),c.alpha=.5,this.view.addChild(c),this.view.addChild(this.container);var d=new createjs.Bitmap(N.getResult("paused-background"));this.container.addChild(d);var e=new j(j.RESUME);e.view.x=230,e.view.y=this.height-20,this.container.addChild(e.view),e.view.on("click",function(){var c=new createjs.Event(a.RESUME,!0);b.view.dispatchEvent(c)});var f=new j(j.PLAY_AGAIN);f.view.x=145,f.view.y=this.height-20,this.container.addChild(f.view),f.view.on("click",function(){var c=new createjs.Event(a.PLAY_AGAIN,!0);b.view.dispatchEvent(c)});var g=new j(j.LEVELS);g.view.x=320,g.view.y=this.height-20,this.container.addChild(g.view),g.view.on("click",function(){var c=new createjs.Event(a.LEVELS,!0);b.view.dispatchEvent(c)})}var b;return a}(),F=function(){function a(){d=this,a.START="START",a.OPTIONS="OPTIONS",this.view=new createjs.Container;var e=new createjs.Bitmap(N.getResult("assets/common/startpage/bg.png"));this.view.addChild(e);var f=new createjs.Bitmap(N.getResult("assets/common/startpage/boom.png"));f.y=K.canvas.height-539,this.view.addChild(f);var g=new createjs.Bitmap(N.getResult("assets/common/startpage/bosjes_onderaan.png"));g.y=K.canvas.height-88,this.view.addChild(g);var h=new createjs.Bitmap(N.getResult("assets/common/startpage/tjilp.png"));h.y=50,h.x=400,this.view.addChild(h);var i=new j(j.START_GAME);this.view.addChild(i.view),i.view.addEventListener("click",b),i.view.x=800,i.view.y=370;var k=new j(j.OPTIONS);this.view.addChild(k.view),k.view.addEventListener("click",c),k.view.x=710,k.view.y=453,$("body").on("keydown",function(a){83===a.which&&b(a)})}function b(){var b=new createjs.Event(a.START,!0);d.view.dispatchEvent(b)}function c(){var b=new createjs.Event(a.OPTIONS,!0);d.view.dispatchEvent(b)}var d;return a}(),G=function(){function a(){e=this,a.LOADING_DONE="LOADING_DONE",this.isPreloadingGame=!1,this.view=new createjs.Container,N=new createjs.LoadQueue,N.installPlugin(createjs.Sound),N.addEventListener("progress",e.handleProgress),N.addEventListener("complete",e.handleComplete),N.addEventListener("fileload",e.handleFileLoad),this.preloaderView=new createjs.Container;var b=new createjs.Bitmap("assets/common/preloader/bg.png");this.preloaderView.addChild(b),this.earth=new createjs.Bitmap("assets/common/preloader/bg2.png"),this.earth.regX=296,this.earth.regY=296,this.earth.x=K.canvas.width/2,this.earth.y=K.canvas.height/2,this.preloaderView.addChild(this.earth),this.progressEgg=new createjs.Bitmap("assets/common/preloader/eitje.png"),this.progressEgg.regX=41.5,this.progressEgg.regY=45.5,this.progressEgg.x=K.canvas.width/2,this.progressEgg.y=K.canvas.height/2,this.preloaderView.addChild(this.progressEgg),this.removePreloaderTimeout=null}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({rotation:-180},6e3+1e3*Math.random()).call(function(){createjs.Tween.get(this).to({y:this.rotation-180},6e3).call(function(){b(this)})})}function c(){b(e.earth),K.addChild(e.preloaderView)}function d(){createjs.Tween.removeTweens(e.earth),K.removeChild(e.preloaderView)}var e;return a.prototype.preloadGame=function(){c(),e.isPreloadingGame=!0;var a=[{src:"assets/common/dead-star-particle.png",id:"dead-star-particle"},{src:"assets/common/star-particle.png",id:"star-particle"},{src:"assets/common/bg.png"},{src:"assets/common/startpage/bg.png"},{src:"assets/common/startpage/boom.png"},{src:"assets/common/startpage/bosjes_onderaan.png"},{src:"assets/common/startpage/tjilp.png"},{src:"assets/common/end/bg.png",id:"end-background"},{src:"assets/common/pause/bg.png",id:"paused-background"},{src:"assets/common/succeed_1.png",id:"success-background"},{src:"assets/common/failed.png",id:"failed-background"},{src:"assets/common/time-coin.png",id:"time-coin"},{src:"assets/common/egg-spritesheet.png"},{src:"assets/common/leaf.png",id:"leaf"},{src:"assets/common/nest.png",id:"nest"},{src:"assets/common/nest-available.png"},{src:"assets/common/nest-locked.png"},{src:"assets/common/twirl.png",id:"twirl"},{src:"assets/common/rock.png",id:"rock"},{src:"assets/common/stars-spritesheet.png"},{src:"assets/common/press_spacebar.png"},{src:"assets/common/progressbar/progress_bar_spritesheet.png"},{src:"assets/common/progressbar/levels_spritesheet.png"},{src:"assets/common/progressbar/bg.png"},{src:"assets/common/buttons/play_more.png"},{src:"assets/common/buttons/retry.png"},{src:"assets/common/buttons/resume.png"},{src:"assets/common/buttons/back.png"},{src:"assets/common/buttons/facebook.png"},{src:"assets/common/buttons/next_level.png"},{src:"assets/common/buttons/play_again.png"},{src:"assets/common/buttons/pause.png"},{src:"assets/common/buttons/levels.png"},{src:"assets/common/buttons/mute.png"},{src:"assets/common/buttons/options.png"},{src:"assets/common/buttons/start_game.png"},{src:"assets/common/buttons/reset_levels.png"},{src:"assets/common/buttons/music_spritesheet.png"},{src:"assets/common/buttons/soundfx_spritesheet.png"},{src:"assets/sound/bounce.mp3",id:"bounce_sound"},{src:"assets/sound/coin.ogg",id:"coin_sound"},{src:"assets/sound/music.ogg",id:"music"},{src:"assets/sound/gameover.ogg",id:"gameover_sound"},{src:"assets/sound/success.ogg",id:"success_sound"}];createjs.Sound.alternateExtensions=["mp3"],N.loadManifest(a,!0)},a.prototype.preloadLevel=function(a){c(),e.isPreloadingGame=!1,N.loadManifest(a,!0)},a.prototype.handleProgress=function(a){e.progressEgg.rotation=360*a.loaded},a.prototype.handleFileLoad=function(){},a.prototype.handleComplete=function(){d();var b=new createjs.Event(a.LOADING_DONE,!0);e.view.dispatchEvent(b)},a.prototype.handleError=function(a){console.log("[StartScreen] error preload!"+a)},a}(),H=function(){function a(){b=this,this.view=new createjs.Container,this.screen=null,a.GAME_OVER="GAME_OVER",a.INSTRUCTIONS="INSTRUCTIONS",a.NEXT_LEVEL="NEXT_LEVEL",a.LEVELS="LEVELS",a.START="START",a.PAUSE="PAUSE",a.END="END"}var b;return a.prototype.showScreen=function(c){null==this.screen&&(c===a.GAME_OVER?(this.screen=new z,this.screen.view.addEventListener(z.RESTART_LEVEL,function(){b.removeScreen()})):c===a.INSTRUCTIONS?this.screen=new A:c===a.START?(this.screen=new F,this.screen.view.addEventListener(F.START,function(){b.removeScreen()})):c===a.PAUSE?(this.screen=new E,this.screen.view.addEventListener(E.RESUME,function(){b.removeScreen()}),this.screen.view.addEventListener(E.PLAY_AGAIN,function(){b.removeScreen()})):c===a.END&&(this.screen=new y,this.screen.view.addEventListener(y.PLAY_AGAIN,function(){b.removeScreen()})),this.view.addChild(this.screen.view))},a.prototype.showOptionsScreen=function(c){b.removeScreen(),this.screen=new D(c),this.view.addChild(this.screen.view),this.screen.view.addEventListener(D.CANCEL,function(){b.removeScreen(),b.showScreen(a.START)})},a.prototype.showLevelsScreen=function(){b.removeScreen(),this.screen=new B,this.view.addChild(this.screen.view),this.screen.view.addEventListener(w.LEVEL_SELECTED,function(){b.removeScreen()}),this.screen.view.addEventListener(B.BACK,function(){b.removeScreen(),b.showScreen(a.START)})},a.prototype.showInstructionsScreen=function(a){this.screen=new A(a),this.view.addChild(this.screen.view),this.screen.view.addEventListener(A.INSTRUCTIONS_DONE,function(){b.removeScreen()})},a.prototype.showNextLevelScreen=function(a,c){this.screen=new C(a,c),this.view.addChild(this.screen.view),this.screen.view.addEventListener(C.NEXT_LEVEL,function(){b.removeScreen()}),this.screen.view.addEventListener(C.PLAY_AGAIN,function(){b.removeScreen()})},a.prototype.removeScreen=function(){null!=b.screen&&(b.view.removeChild(b.screen.view),b.screen=null)},a}();c.backgroundMusicInstance=null,c.playSounds=!1,c.toggleSound=function(){c.playSounds=!c.playSounds,c.playSounds?null===c.backgroundMusicInstance?c.backgroundMusicInstance=createjs.Sound.play("music",{interrupt:createjs.Sound.INTERRUPT_NONE,loop:-1,volume:.4}):c.backgroundMusicInstance.setMute(!1):null!==c.backgroundMusicInstance&&c.backgroundMusicInstance.setMute(!0)},c.startSounds=function(){null==c.backgroundMusicInstance&&O.gamerData.isMusicOn&&this.toggleSound()},c.playBounce=function(){(c.playSounds||O.gamerData.isFxOn)&&createjs.Sound.play("bounce_sound")},c.playGameOver=function(){(c.playSounds||O.gamerData.isFxOn)&&createjs.Sound.play("gameover_sound")},c.playSuccess=function(){(c.playSounds||O.gamerData.isFxOn)&&createjs.Sound.play("success_sound")},c.playCoinCatched=function(){(c.playSounds||O.gamerData.isFxOn)&&createjs.Sound.play("coin_sound")};var I=function(){function a(a){c=this,this.xmlPath=a,this.pauseGame=!1,this.gamerData=this.getStoredGamerData(),console.log(this.gamerData),null==this.gamerData&&(this.gamerData=new J),console.log(this.gamerData)}function b(){localStorage.setItem("tjilp_game",JSON.stringify(c.gamerData))}var c;return a.prototype.parse=function(){$.ajax({url:this.xmlPath,type:"GET",dataType:"xml",success:function(a){c.levelsData=a,$(c).trigger("parsed")}})},a.prototype.getLevelCount=function(){return c.levelsData.getElementsByTagName("levels")[0].childElementCount},a.prototype.getLevel=function(a){return c.levelsData.getElementsByTagName("levels")[0].getElementsByTagName("level")[a]},a.prototype.getEggDataForLevel=function(a){return this.getLevel(a).getElementsByTagName("egg")[0]},a.prototype.getLevelInstructionsForLevel=function(a){return this.getLevel(a).getElementsByTagName("instruction")},a.prototype.getManifestForLevel=function(a){var b=[];return $(this.getLevel(a)).find("*").each(function(a,c){null!=$(c).attr("img")&&b.push({src:$(c).attr("img")})}),b},a.prototype.getStoredGamerData=function(){var a=localStorage.getItem("tjilp_game");return"undefined"!==a?JSON.parse(a):null},a.prototype.didUserGetInstructionForLevel=function(a){return c.gamerData.givenInstructions?c.gamerData.givenInstructions[a]?!0:!1:!1},a.prototype.storeGamerLevelData=function(a,d){(null==this.gamerData.levels[a]||this.gamerData.levels[a]<d)&&(c.gamerData.levels[a]=d,b())},a.prototype.storeGamerInstructionGiven=function(a){c.gamerData.givenInstructions[a]=!0,b()},a.prototype.storeSettings=function(){b()},a.prototype.resetStorage=function(){localStorage.setItem("tjilp_game",""),localStorage.clear()},a}(),J=function(){function a(){this.name="Jonathan",this.id=2304958271,this.levels=[],this.givenInstructions=[],this.isMusicOn=!0,this.isFxOn=!0}return a}();window.fbAsyncInit=function(){FB.init({appId:"596243747091537",status:!0,cookie:!0,xfbml:!0})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document);var K,L,M,N,O,P={b2Vec2:Box2D.Common.Math.b2Vec2,b2BodyDef:Box2D.Dynamics.b2BodyDef,b2Body:Box2D.Dynamics.b2Body,b2FixtureDef:Box2D.Dynamics.b2FixtureDef,b2Fixture:Box2D.Dynamics.b2Fixture,b2World:Box2D.Dynamics.b2World,b2MassData:Box2D.Collision.Shapes.b2MassData,b2PolygonShape:Box2D.Collision.Shapes.b2PolygonShape,b2CircleShape:Box2D.Collision.Shapes.b2CircleShape,b2DebugDraw:Box2D.Dynamics.b2DebugDraw,b2DistanceJointDef:Box2D.Dynamics.Joints.b2DistanceJointDef,b2BuoyancyController:Box2D.Dynamics.Controllers.b2BuoyancyController},Q=30;!function(){function a(){S=this,K=new createjs.Stage(document.getElementById("game")),K.enableMouseOver(),M=document.getElementById("debug"),this.width=K.canvas.width,this.height=K.canvas.height,this.levelStarted=!1,this.collisionDetected=!1,this.isPaused=!0,this.keypressCount=0,O=new I("data/game.xml"),$(O).on("parsed",d),O.parse(),b(),g()}function b(){L=new P.b2World(new P.b2Vec2(0,20),!0);var a=new P.b2DebugDraw;a.SetSprite(M.getContext("2d")),a.SetDrawScale(Q),a.SetFillAlpha(.2),a.SetFlags(P.b2DebugDraw.e_shapeBit|P.b2DebugDraw.e_jointBit),L.SetDebugDraw(a);var b=new Box2D.Dynamics.b2ContactListener;b.BeginContact=function(a){S.gameContainer.handleBeginContact(a);var b=a.GetFixtureA().GetUserData(),d=a.GetFixtureB().GetUserData();"ground"===b||"ground"===d?S.collisionDetected||(t(),S.collisionDetected=!0):"rock"===b||"rock"===d?S.collisionDetected||(t(),S.collisionDetected=!0):"leaf"===b&&"bird"===d||"bird"===d&&"leaf"===b?S.collisionDetected||(c.playBounce(),S.stats.increaseBounce()):"top-nest"===b||"top-nest"===d?S.collisionDetected||(S.gameContainer.bird.rest({x:S.gameContainer.nest.view.x,y:S.gameContainer.nest.view.y}),u(),S.collisionDetected=!0):"tornado"===b||"tornado"===d?S.gameContainer.bird.tornadoFly():"enemyBird"===b||"enemyBird"===d?(t(),S.collisionDetected=!0):"balloon"===b||"balloon"===d?(t(),S.collisionDetected=!0):("miniTree"===b||"miniTree"===d)&&(t(),S.collisionDetected=!0),null!==b&&null!==d&&(-1!==b.indexOf("timeCoin")||-1!==d.indexOf("timeCoin"))&&(S.gameContainer.view.addEventListener(e.COIN_REMOVED,N),-1!==b.indexOf("timeCoin")?S.gameContainer.removeTimeCoinWithUserData(b):S.gameContainer.removeTimeCoinWithUserData(d))},b.EndContact=function(a){S.gameContainer.handleEndContact(a)},L.SetContactListener(b)}function d(){S.preloadManager=new G,S.preloadManager.view.addEventListener(G.LOADING_DONE,f),S.preloadManager.preloadGame()}function f(){if(S.preloadManager.isPreloadingGame)j(),i(),n();else{var a=O.getLevelInstructionsForLevel(S.stats.level);a.length>0&&!O.didUserGetInstructionForLevel(S.stats.level)?(j(),r(a)):s()}}function g(){createjs.Ticker.addEventListener("tick",R),createjs.Ticker.setFPS(60),createjs.Ticker.useRAF=!0,$(document).on("keydown",function(a){a.which>=37&&a.which<=39&&(S.keypressCount++,S.keypressCount>3)||(32===a.which?J():39===a.which?S.gameContainer.bird.moveRight():37===a.which?S.gameContainer.bird.moveLeft():69===a.which&&(S.screenManager.showScreen(H.END),S.screenManager.view.addEventListener(y.MENU,o)))}),$(document).on("keyup",function(){S.keypressCount=0})}function i(){null==this.stats&&k(),null==this.screenManager&&l()}function j(){S.levelStarted=!1,null==S.gameContainer&&(this.gameContainer=new e,K.addChild(this.gameContainer.view)),this.gameContainer.resetContainer();var a=0;null!=S.stats&&(a=O.getLevel(S.stats.level),S.stats.leafsCount=$(a).find("leaf").length,S.stats.maxTime=$(a).attr("time")),$(a).find("background").each(function(a,b){0>=a?$("#game").css("background-image","url("+$(b).attr("img")+")"):S.gameContainer.createBackground($(b).attr("img"))}),$(a).find("ground").each(function(a,b){S.gameContainer.createGround($(b).attr("img"),S.width/2,S.height-parseInt($(b).attr("height")),S.width,parseInt($(b).attr("height")))}),$(a).find("tree").each(function(a,b){S.gameContainer.createTree($(b).attr("img"),$(b).attr("x"),$(b).attr("width"),$(b).attr("height"))}),$(a).find("leaf").each(function(a,b){S.gameContainer.createLeaf($(b).attr("x"),$(b).attr("y"),$(b).attr("rotation"),$(b).attr("restitution"))}),$(a).find("rock").each(function(a,b){S.gameContainer.createRock($(b).attr("img"),$(b).attr("x"),$(b).attr("y"),$(b).attr("width"),$(b).attr("height"))}),$(a).find("tornado").each(function(a,b){S.gameContainer.createTornado($(b).attr("img"),$(b).attr("x"),$(b).attr("y"))}),$(a).find("enemyBird").each(function(a,b){S.gameContainer.createEnemyBird($(b).attr("img"),$(b).attr("x"),$(b).attr("y"),$(b).attr("direction"))}),$(a).find("balloon").each(function(a,b){S.gameContainer.createBalloon($(b).attr("img"),$(b).attr("x"),$(b).attr("y"),$(b).attr("direction"))}),$(a).find("egg").each(function(a,b){S.gameContainer.createBird($(b).attr("x"),$(b).attr("y")),S.gameContainer.bird.setMaxRotations(O.getEggDataForLevel(S.stats.level).getAttribute("maxRotations")),S.gameContainer.bird.setEvolution(O.getEggDataForLevel(S.stats.level).getAttribute("evolution"))}),$(a).find("nest").each(function(a,b){S.gameContainer.createNest($(b).attr("x"),$(b).attr("y"),$(b).attr("start"))}),$(a).find("miniTree").each(function(a,b){S.gameContainer.createMiniTree($(b).attr("img"),$(b).attr("x"))}),$(a).find("branch").each(function(a,b){S.gameContainer.createBranch($(b).attr("img"),$(b).attr("x"),$(b).attr("y"))}),$(a).find("cloud").each(function(a,b){S.gameContainer.createCloud($(b).attr("img"),$(b).attr("x"),$(b).attr("y"))}),$(a).find("timeCoin").each(function(a,b){S.gameContainer.createTimeCoin($(b).attr("x"),$(b).attr("y"),$(b).attr("worth"),a)})}function k(){this.stats=new x(20,20),this.stats.view.addEventListener(x.LEVELS_CLICKED,o),this.stats.view.addEventListener(x.TIME_OUT,t),this.stats.view.addEventListener(x.PAUSE,m),K.addChild(this.stats.view)}function l(){this.screenManager=new H,K.addChild(this.screenManager.view)}function m(){S.screenManager.showScreen(H.PAUSE),S.screenManager.view.addEventListener(E.LEVELS,function(){o(!0)}),S.screenManager.view.addEventListener(E.RESUME,function(){O.pauseGame=!1}),S.screenManager.view.addEventListener(E.PLAY_AGAIN,function(){O.pauseGame=!1,s()})}function n(){S.screenManager.showScreen(H.START),S.screenManager.view.addEventListener(F.START,function(){o(!1)}),S.screenManager.view.addEventListener(F.OPTIONS,function(){p()})}function o(){S.screenManager.showLevelsScreen(),S.screenManager.view.addEventListener(w.LEVEL_SELECTED,function(a){O.pauseGame=!1,S.stats.setLevel(a.levelIndex),q(a.levelIndex)})}function p(){S.isPaused=!0,S.screenManager.showOptionsScreen(),S.screenManager.view.addEventListener(D.SAVE,function(){O.storeSettings()}),S.screenManager.view.addEventListener(D.RESET_LEVELS,function(){O.resetStorage()})}function q(a){S.preloadManager.preloadLevel(O.getManifestForLevel(a))}function r(a){S.isPaused=!0,S.screenManager.showInstructionsScreen(a),S.screenManager.view.addEventListener(A.INSTRUCTIONS_DONE,function(){O.storeGamerInstructionGiven(S.stats.level),s()})}function s(){j(),S.isPaused=!1,S.collisionDetected=!1,S.stats.resetStats(),S.stats.showStats(),c.startSounds(),S.gameContainer.showSpacebarInstruction()}function t(){S.isPaused||(c.playGameOver(),S.screenManager.showScreen(H.GAME_OVER),S.screenManager.view.addEventListener(z.RESTART_LEVEL,v),S.screenManager.view.addEventListener(z.MENU,o),S.isPaused=!0,S.gameContainer.bird.die(),S.stats.hideStats())}function u(){S.isPaused||(S.stats.level>=O.getLevelCount()-1?(S.screenManager.showScreen(H.END),S.screenManager.view.addEventListener(y.MENU,o)):(c.playSuccess(),O.storeGamerLevelData(this.stats.level,this.stats.getStars()),S.isPaused=!0,S.screenManager.showNextLevelScreen(this.stats.level,this.stats.getStars()),S.screenManager.view.addEventListener(C.NEXT_LEVEL,B),S.screenManager.view.addEventListener(C.PLAY_AGAIN,v),S.stats.hideStats()))}function v(){s(),S.isPaused=!1,S.collisionDetected=!1}function B(){S.stats.levelUp(),q(S.stats.level)}function J(){S.levelStarted||S.isPaused||(S.gameContainer.removeSpacebarInstruction(),this.gameContainer.bird.push(),this.gameContainer.bird.view.addEventListener(h.DIED,function(){t()}),S.levelStarted=!0)}function N(){S.stats.earnTime(),S.gameContainer.view.removeEventListener(e.COIN_REMOVED,N),c.playCoinCatched()}function R(){K.update(),O.pauseGame||(L.Step(1/60,10,10),L.ClearForces())}var S;a()}()}({},function(){return this}());