!function(a,b){function c(){}function d(a,b){FB.ui({method:"stream.publish",display:"popup",message:"",name:"Tjilp",caption:"Check out my score!",description:"I got "+b+" stars on level "+a,link:"http://tjilp.be",picture:"http://www.baatsontwerp.nl/Styles/img/portfolio/illustraties/Tjilp/tjilp_web.jpg"},function(a){a&&a.post_id?console.log("Post was published"):console.log("Post NOT published")})}b["true"]=a;var e=function(){function a(c){d=this,a.COIN_REMOVED="COIN_REMOVED",this.gameData=c,this.view=new createjs.Container,this.leafs=[],this.obstacles=[],this.clouds=[],this.trees=[],this.backgrounds=[],this.timeCoins=[],$(this.view).on("tick",$.proxy(b,this))}function b(){null!=d.bird&&(d.view.y=d.bird.view.y<80?-d.bird.view.y+80:0)}function c(a){var b=F.canvas.height-a;return b}var d;return a.prototype.createBackground=function(a){var b=new f(a);this.view.addChild(b.view),this.backgrounds.push(b)},a.prototype.createGround=function(a,b,c,d,e){this.ground=new l(a,b,c,d,e),this.view.addChild(this.ground.view)},a.prototype.createRock=function(a,b,d,e,f){var g=new p(a,b,c(d),e,f);this.view.addChild(g.view),this.obstacles.push(g)},a.prototype.createLeaf=function(a,b,d,e){var f=new m(a,c(b),58,6.5,d,e);this.view.addChild(f.view),this.leafs.push(f)},a.prototype.createBird=function(a,b){this.bird=new h(a,c(b),40,40),this.view.addChild(this.bird.view)},a.prototype.createNest=function(a,b){null==a&&(a=F.canvas.width-20),this.nest=new o(a,c(b),30,12),this.view.addChild(this.nest.view)},a.prototype.createTornado=function(a,b){var d=new r(a,c(b),150,150);this.view.addChild(d.view),this.obstacles.push(d)},a.prototype.createCloud=function(a,b,d){var e=new j(a,b,c(d),150,150);this.view.addChild(e.view),this.clouds.push(e)},a.prototype.createEnemyBird=function(a,b,d,e){var f=new k(a,b,c(d),e);this.view.addChild(f.view),this.obstacles.push(f)},a.prototype.createBalloon=function(a,b,d,e){var f=new g(a,b,c(d),93,157,e);this.view.addChild(f.view),this.obstacles.push(f)},a.prototype.createTree=function(a,b,c,d){var e=new s(a,b,c,d);this.view.addChild(e.view),this.trees.push(e)},a.prototype.createTimeCoin=function(a,b,d,e){var f=new q(a,c(b),d,e);this.view.addChild(f.view),this.timeCoins.push(f)},a.prototype.createMiniTree=function(a,b){var d=new n(a,b,c(0),20,245);this.view.addChild(d.view),this.obstacles.push(d)},a.prototype.removeTimeCoinWithUserData=function(b){for(var c=0;c<this.timeCoins.length;c++){var e=this.timeCoins[c];if(e.view.body.GetUserData()===b){G.DestroyBody(e.view.body),this.view.removeChild(e.view),this.timeCoins.splice(c,1);var f=new createjs.Event(a.COIN_REMOVED);d.view.dispatchEvent(f)}}},a.prototype.removeBird=function(){null!=this.bird&&(G.DestroyBody(this.bird.view.body),this.view.removeChild(this.bird.view),this.bird=null)},a.prototype.removeGround=function(){null!=this.ground&&(G.DestroyBody(this.ground.view.body),this.view.removeChild(this.ground.view),this.ground=null)},a.prototype.removeNest=function(){null!=this.nest&&(G.DestroyBody(this.nest.view.body),this.view.removeChild(this.nest.view),this.nest=null)},a.prototype.resetContainer=function(){for(var a=this.leafs.length,b=0;a>b;b++){var c=this.leafs.pop();G.DestroyBody(c.view.body),this.view.removeChild(c.view)}a=this.obstacles.length;for(var d=0;a>d;d++){var e=this.obstacles.pop();G.DestroyBody(e.view.body),this.view.removeChild(e.view)}a=this.clouds.length;for(var f=0;a>f;f++){var g=this.clouds.pop();G.DestroyBody(g.view.body),this.view.removeChild(g.view)}a=this.trees.length;for(var h=0;a>h;h++){var i=this.trees.pop();this.view.removeChild(i.view)}a=this.backgrounds.length;for(var j=0;a>j;j++){var k=this.backgrounds.pop();this.view.removeChild(k.view)}a=this.timeCoins.length;for(var l=0;a>l;l++){var m=this.timeCoins.pop();G.DestroyBody(m.view.body),this.view.removeChild(m.view)}this.removeBird(),this.removeGround(),this.removeNest()},a.prototype.parallaxLeft=function(){var a=this.backgrounds[1].view;createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({x:a.x+10},1e3)},a.prototype.parallaxRight=function(){var a=this.backgrounds[1].view;createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({x:a.x-10},1e3)},a.prototype.handleBeginContact=function(a){a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData()},a.prototype.handleEndContact=function(a){var b=a.GetFixtureA().GetBody().GetUserData(),c=a.GetFixtureB().GetBody().GetUserData();if("leaf"===b||"leaf"===c)for(var d=0;d<this.leafs.length;d++){var e=this.leafs[d];e.handleEndContact(a)}else if("cloud"===b||"cloud"===c)for(var f=0;f<this.clouds.length;f++){var g=this.clouds[f];g.handleEndContact(a)}},a}(),f=function(){function a(a){b=this,this.x=0,this.y=0,this.width=F.canvas.width,this.height=F.canvas.height,this.view=new createjs.Bitmap(a),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=F.canvas.width/2,this.view.y=F.canvas.height/2}var b;return a}(),g=function(){function a(a,d,e,f,g){c=this,this.x=d,this.y=e,this.width=f,this.height=g,this.view=new createjs.Bitmap(I.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height/2;var h=new J.b2FixtureDef;h.density=2,h.friction=.3,h.restitution=0,h.isSensor=!0;var i=new J.b2BodyDef;i.type=J.b2Body.b2_kinematicBody,i.position.x=this.x/K,i.position.y=this.y/K,i.userData="balloon",this.view.body=G.CreateBody(i),this.view.body.SetUserData("balloon");var j=new J.b2CircleShape(this.width/2/K);j.m_p.Set(0,-1),h.shape=j,h.userData="balloon",this.view.body.CreateFixture(h);var k=new J.b2CircleShape(this.width/4/K);k.m_p.Set(0,.5),h.shape=k,h.userData="balloon",this.view.body.CreateFixture(h);var l=new J.b2CircleShape(this.width/8/K);l.m_p.Set(0,2.2),h.shape=l,h.userData="balloon",this.view.body.CreateFixture(h),this.updateView(),b(this.view)}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({y:a.y+30},1700).call(function(){createjs.Tween.get(this).to({y:this.y-30},1700).call(function(){b(this)})})}var c;return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K,this.view.y=this.view.body.GetPosition().y*K,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),h=function(){function a(c,d,f,g){e=this,a.DIED="DIED",this.x=c,this.y=d,this.width=f,this.height=g,this.impulse=7,this.maxRotations=0,this.evolution=0,this.isDead=!1,this.view=new createjs.Container;var h={images:["assets/common/egg-spritesheet.png"],frames:{width:45,height:55},animations:{one:[0],two:[1],three:[2],fly:[3,4,5,6]}},i=new createjs.SpriteSheet(h);this.sprite=new createjs.Sprite(i,"one"),this.view.addChild(this.sprite),this.view.regX=25.5,this.view.regY=27.5;var j=new J.b2FixtureDef;j.density=1,j.friction=1,j.restitution=0;var k=new J.b2BodyDef;k.type=J.b2Body.b2_staticBody,k.position.x=this.x/K,k.position.y=this.y/K,k.userData="bird",this.view.body=G.CreateBody(k),this.view.body.SetUserData("bird");var l=new J.b2CircleShape((this.width/2.3-4)/K);l.m_p.Set(-.2,-.5),j.shape=l,j.userData="bird",this.view.body.CreateFixture(j);var m=new J.b2CircleShape(this.width/2.3/K);m.m_p.Set(-.2,.1),j.shape=m,j.userData="bird",this.view.body.CreateFixture(j),$(this.view).on("tick",$.proxy(b,this))}function b(){this.view.x=this.view.body.GetPosition().x*K,this.view.y=this.view.body.GetPosition().y*K,this.view.rotation=this.view.body.GetAngle()*(180/Math.PI),!e.isDead&&(this.view.x>F.canvas.width||this.view.x<0||this.view.y>F.canvas.height)&&c()}function c(){var b=new createjs.Event(a.DIED);e.view.dispatchEvent(b),e.isDead=!0}function d(a,b,c){a.ApplyImpulse(new J.b2Vec2(Math.cos(b*(Math.PI/180))*c,Math.sin(b*(Math.PI/180))*c),a.GetWorldCenter())}var e;return a.prototype.push=function(){this.view.body.SetType(J.b2Body.b2_dynamicBody),d(e.view.body,-45,15),this.view.body.SetAngularVelocity(-1)},a.prototype.moveRight=function(){e.view.body.ApplyTorque(e.impulse),d(e.view.body,0,e.impulse),e.view.body.SetAngularVelocity(1),e.impulseAnimation(t.LEFT_DIRECTION)},a.prototype.moveLeft=function(){e.view.body.ApplyTorque(-e.impulse),d(e.view.body,0,-e.impulse),e.view.body.SetAngularVelocity(-1),e.impulseAnimation(t.RIGHT_DIRECTION)},a.prototype.fly=function(){2===this.evolution&&(e.view.body.SetLinearDamping(10),d(e.view.body,-90,e.impulse),this.sprite.gotoAndPlay("fly"),setInterval(this.stopFly,2e3))},a.prototype.tornadoFly=function(){d(e.view.body,-90,20)},a.prototype.rest=function(a){this.view.body.SetType(J.b2Body.b2_staticBody),this.view.removeAllEventListeners(),console.log(this.view.rotation%90,this.view.rotation,90*(this.view.rotation%180)),createjs.Tween.get(this.view).to({rotation:360,x:a.x+35,y:a.y-20},300)},a.prototype.stopFly=function(){console.log("[BIRD] stop flying"),e.view.body.SetLinearDamping(0)},a.prototype.setEvolution=function(a){switch(this.evolution=parseInt(a),this.evolution){case 1:this.sprite.gotoAndStop("one");break;case 2:this.sprite.gotoAndStop("two");break;case 3:this.sprite.gotoAndStop("three");break;default:this.sprite.gotoAndStop("one")}},a.prototype.impulseAnimation=function(a){var b=new t(this.view.x+60,this.view.y,a);F.addChild(b.view)},a.prototype.setMaxRotations=function(a){this.maxRotations=a},a}(),i=function(){function a(c){b=this,this.view=new createjs.Container,console.log(c);var d="assets/common/buttons/"+c.toLowerCase()+".png";this.clickTimeout=null,this.width=50,this.height=50,c===a.LEVELS?(this.width=87,this.height=78):c===a.NEXT_LEVEL?(this.width=99,this.height=92):c===a.PLAY_AGAIN?(this.width=83,this.height=76):c===a.FACEBOOK?(this.width=80,this.height=72):c===a.START&&(this.width=70,this.height=40),this.view.regX=this.width/2,this.view.regY=this.height/2;var e={images:[d],frames:{width:this.width,height:this.height},animations:{"default":[0],active:[1],hover:[2]}},f=new createjs.SpriteSheet(e);this.btn=new createjs.Sprite(f,"default"),this.view.addChild(this.btn),this.btn.regX=this.width/2,this.btn.regY=this.height/2,this.btn.addEventListener("click",function(){b.btn.gotoAndStop("active"),this.clickTimeout=setTimeout(function(){b.btn.gotoAndStop("default"),clearTimeout(b.clickTimeout)},100)}),this.btn.addEventListener("mouseover",function(a){createjs.Tween.get(a.target).to({scaleX:1.1,scaleY:1.1},100)}),this.btn.addEventListener("mouseout",function(a){createjs.Tween.get(a.target).to({scaleX:1,scaleY:1},100)}),this.view.cursor="pointer",this.btn.scaleX=0,this.btn.scaleY=0,createjs.Tween.get(this.btn).wait(1e3*Math.random()).to({scaleX:1,scaleY:1},1200,createjs.Ease.elasticOut)}var b;return a}();i.PLAY_AGAIN="PLAY_AGAIN",i.NEXT_LEVEL="NEXT_LEVEL",i.FACEBOOK="FACEBOOK",i.MUTE="MUTE",i.LEVELS="LEVELS",i.START="START";var j=function(){function a(a,e,f,g,h){d=this,this.x=e,this.y=f,this.width=g,this.height=h,this.view=new createjs.Bitmap(I.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height/2;var i=new J.b2FixtureDef;i.density=2,i.friction=.3,i.restitution=0,i.isSensor=!0;var j=new J.b2BodyDef;j.type=J.b2Body.b2_kinematicBody,j.position.x=this.x/K,j.position.y=this.y/K,j.userData="cloud",this.view.body=G.CreateBody(j),this.view.body.SetUserData("cloud");var k=new J.b2CircleShape(this.width/3.5/K);k.m_p.Set(0,0),i.shape=k,i.userData="cloud",this.view.body.CreateFixture(i);var l=new J.b2CircleShape((this.width/3.5-15)/K);l.m_p.Set(2,0),i.shape=l,i.userData="cloud",this.view.body.CreateFixture(i);var m=new J.b2CircleShape((this.width/3.5-10)/K);m.m_p.Set(-2,0),i.shape=m,i.userData="cloud",this.view.body.CreateFixture(i),c=new J.b2BuoyancyController,c.normal.Set(0,-1),c.useDensity=!0,c.density=2,G.AddController(c),this.updateView(),b(this.view)}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({y:a.y+20},2700).call(function(){createjs.Tween.get(this).to({y:this.y-20},2700).call(function(){b(this)})})}var c,d;return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K-20,this.view.y=this.view.body.GetPosition().y*K+32,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a.prototype.handleBeginContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()||c.AddBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()||c.AddBody(f)}},a.prototype.handleEndContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()&&c.RemoveBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()&&c.RemoveBody(f)}},a}(),k=function(){function a(a,c,d,e){this.x=c,this.y=d,this.width=46,this.height=32,this.view=new createjs.Container;var f={framerate:8,images:[a],frames:{width:46,height:32},animations:{fly:[0,1]}},g=new createjs.SpriteSheet(f);this.sprite=new createjs.Sprite(g,"fly"),this.view.addChild(this.sprite),this.view.regX=23,this.view.regY=16;var h=new J.b2FixtureDef;h.density=2,h.friction=.3,h.restitution=0,h.isSensor=!0;var i=new J.b2BodyDef;i.type=J.b2Body.b2_kinematicBody,i.position.x=this.x/K,i.position.y=this.y/K,i.userData="enemyBird",this.view.body=G.CreateBody(i),this.view.body.SetUserData("enemyBird");var j=new J.b2CircleShape(this.width/3.2/K);j.m_p.Set(0,0),h.shape=j,h.userData="enemyBird",this.view.body.CreateFixture(h),"right"===e?(this.view.body.SetLinearVelocity(new J.b2Vec2(5,0)),this.view.scaleX=-1):this.view.body.SetLinearVelocity(new J.b2Vec2(-5,0)),$(this.view).on("tick",$.proxy(b,this))}function b(){this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K,this.view.y=this.view.body.GetPosition().y*K,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),l=function(){function a(a,c,d,e,f){b=this;var g=50;this.x=c,this.y=d,this.width=e,this.height=f,this.view=new createjs.Bitmap(a),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=F.canvas.width/2,this.view.y=F.canvas.height-f/2;var h=new J.b2FixtureDef;h.density=1,h.friction=.5,h.restitution=0;var i=new J.b2BodyDef;i.type=J.b2Body.b2_staticBody,i.position.x=this.x/K,i.position.y=(F.canvas.height-g)/K,i.userData="ground",h.shape=new J.b2PolygonShape,h.shape.SetAsBox(this.width/K,g/K),h.userData="ground",this.view.body=G.CreateBody(i),this.view.body.CreateFixture(h)}var b;return a}(),m=function(){function a(a,c,d,e,f,g){this.x=a,this.y=c,this.width=d,this.height=e,this.rotation=f,this.restitution=null==g?1:g,this.view=new createjs.Bitmap(I.getResult("leaf")),this.view.regX=this.width,this.view.regY=this.height;var h=new J.b2FixtureDef;h.density=.1,h.friction=.4,h.restitution=this.restitution;var i=new J.b2BodyDef;i.type=J.b2Body.b2_staticBody,i.position.x=this.x/K,i.position.y=this.y/K,i.userData="leaf",h.shape=new J.b2PolygonShape,h.shape.SetAsBox(this.width/K,this.height/K),h.userData="leaf",this.view.body=G.CreateBody(i),this.view.body.CreateFixture(h),this.view.body.SetAngle(f/180*Math.PI),$(this.view).on("tick",$.proxy(b,this))}function b(){this.updateView()}var c;return a.prototype.handleBeginContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()||c.AddBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()||c.AddBody(f)}},a.prototype.handleEndContact=function(a){var b=a.GetFixtureA(),d=a.GetFixtureB();if(b.IsSensor()){var e=d.GetBody();e.GetControllerList()&&c.RemoveBody(e)}else if(d.IsSensor()){var f=b.GetBody();f.GetControllerList()&&c.RemoveBody(f)}},a.prototype.updateView=function(){this.view.rotation=this.view.body.GetAngle()*(180/Math.PI),this.view.x=this.view.body.GetPosition().x*K,this.view.y=this.view.body.GetPosition().y*K},a}(),n=function(){function a(a,b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.view=new createjs.Bitmap(I.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height;var f=new J.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=.1;var g=new J.b2BodyDef;g.type=J.b2Body.b2_staticBody,g.position.x=this.x/K,g.position.y=this.y/K,g.userData="miniTree",f.shape=new J.b2PolygonShape,f.shape.SetAsBox(this.width/K,(this.height-20)/K),f.userData="miniTree",this.view.body=G.CreateBody(g),this.view.body.CreateFixture(f),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K-50,this.view.y=this.view.body.GetPosition().y*K,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),o=function(){function a(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.view=new createjs.Bitmap(I.getResult("nest")),this.view.regX=this.width/2,this.view.regY=this.height/2;var e=new J.b2FixtureDef;e.density=1,e.friction=.5,e.restitution=0;var f=new J.b2BodyDef;f.type=J.b2Body.b2_staticBody,f.position.x=this.x/K,f.position.y=this.y/K,f.userData="nest",e.shape=new J.b2PolygonShape,e.shape.SetAsBox(this.width/K,this.height/K),this.view.body=G.CreateBody(f),this.view.body.CreateFixture(e);var g=new J.b2PolygonShape;g.SetAsOrientedBox((this.width-5)/K,3/K,new J.b2Vec2(0,-.5)),e.shape=g,e.userData="top-nest",this.view.body.CreateFixture(e),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K-32,this.view.y=this.view.body.GetPosition().y*K-13,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),p=function(){function a(a,b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.view=new createjs.Bitmap(I.getResult(a)),this.view.regX=this.width/2,this.view.regY=this.height/2;var f=new J.b2FixtureDef;f.density=1,f.friction=.5,f.restitution=.1;var g=new J.b2BodyDef;g.type=J.b2Body.b2_staticBody,g.position.x=this.x/K,g.position.y=this.y/K,g.userData="rock";var h=d/475,i=e/358;f.shape=new J.b2PolygonShape;var j=[];j.push(new J.b2Vec2(9*-(1-h),-6*i)),j.push(new J.b2Vec2(6.3*h-9*(1-h),3.3)),j.push(new J.b2Vec2(-5.5*h-9*(1-h),3.3)),f.shape.SetAsVector(j,3),f.userData="rock",this.view.body=G.CreateBody(g),this.view.body.CreateFixture(f),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K,this.view.y=this.view.body.GetPosition().y*K+5,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),q=function(){function a(a,d,e,f){c=this,this.x=a,this.y=d,this.width=31,this.height=31,this.worth=e,this.view=new createjs.Bitmap(I.getResult("time-coin")),this.view.regX=this.width/2,this.view.regY=this.height/2;var g=new J.b2FixtureDef;g.isSensor=!0;var h=new J.b2BodyDef;h.type=J.b2Body.b2_kinematicBody,h.position.x=this.x/K,h.position.y=this.y/K,this.view.body=G.CreateBody(h),this.view.body.SetUserData("timeCoin"+f);var i=new J.b2CircleShape(this.width/2/K);i.m_p.Set(0,0),g.shape=i,g.userData="timeCoin"+f,this.view.body.CreateFixture(g),this.updateView(),b(this.view)}function b(a){createjs.Tween.removeTweens(a),createjs.Tween.get(a).to({y:a.y-10},1e3+500*Math.random()).call(function(){createjs.Tween.get(this).to({y:a.y+10},1e3+500*Math.random()).call(function(){b(this)})})}var c;return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K,this.view.y=this.view.body.GetPosition().y*K,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),r=function(){function a(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.view=new createjs.Bitmap(I.getResult("tornado")),this.view.regX=this.width/2,this.view.regY=this.height/2;var e=new J.b2FixtureDef;e.density=1,e.friction=.5,e.restitution=1,e.isSensor=!0;var f=new J.b2BodyDef;f.type=J.b2Body.b2_staticBody,f.position.x=this.x/K,f.position.y=this.y/K,f.userData="tornado",e.shape=new J.b2PolygonShape,e.shape.SetAsBox(this.width/K,this.height/K),this.view.body=G.CreateBody(f),this.view.body.CreateFixture(e),this.updateView()}return a.prototype.updateView=function(){this.view.x=this.view.body.GetPosition().x*K-20,this.view.y=this.view.body.GetPosition().y*K-20,this.view.rotation=this.view.body.GetAngle*(180/Math.PI)},a}(),s=function(){function a(a,c,d,e){b=this,this.x=c,this.y=F.canvas.height-e/2,this.width=d,this.height=e,this.view=new createjs.Bitmap(a),this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=this.x,this.view.y=this.y}var b;return a}(),t=function(){function a(c,d,e){b=this,this.view=new createjs.Bitmap(I.getResult("twirl")),this.width=11,this.height=21,this.view.regX=this.width/2,this.view.regY=this.height/2,this.view.x=c-90,this.view.y=d;var f=c-110;e===a.RIGHT_DIRECTION&&(this.view.scaleX=-1,this.view.x=c-30,f=c),createjs.Tween.get(this.view).to({scaleX:0,scaleY:0,rotate:10,x:f},400).call(function(){this.parent.removeChild(this)})}var b;return a}();t.LEFT_DIRECTION="LEFT_DIRECTION",t.RIGHT_DIRECTION="RIGHT_DIRECTION";var u=function(){function a(d,e,f){c=this,a.LEVEL_SELECTED="LEVEL_SELECTED",this.levelIndex=d,this.starsCount=e,this.isPlayable=f,this.view=new createjs.Container;var g=new createjs.Bitmap("assets/common/nest.png");if(this.view.addChild(g),g.y=25,null!=this.starsCount&&this.starsCount>0){var h=new createjs.Bitmap("assets/common/stars_"+this.starsCount+".png");this.view.addChild(h),h.x=12}this.view.cursor="pointer",this.view.addEventListener("click",$.proxy(b,this))}function b(){c.view.off();var b=new createjs.Event(a.LEVEL_SELECTED,!0);b.levelIndex=this.levelIndex,c.view.dispatchEvent(b)}var c;return a}(),v=function(){function a(d,f){e=this,a.LEVELS_CLICKED="LEVELS_CLICKED",a.TIME_OUT="TIME_OUT",this.view=new createjs.Container,this.view.x=d,this.view.y=f,this.stars=1,this.level=0,this.bounces=0,this.leafsCount=1,this.timeCount=0,this.levelTxt=new createjs.Text("","14px Arial","#000000"),this.view.addChild(this.levelTxt),this.levelTxt.x=F.canvas.width/2-61,this.levelTxt.y=10,this.timeTxt=new createjs.Text("","14px Arial","#000000"),this.view.addChild(this.timeTxt),this.timeTxt.x=F.canvas.width/2-85,this.timeTxt.y=40;var g={images:["assets/common/buttons/mute.png"],frames:{width:27,height:37},animations:{on:[0],mute:[1]}},h=new createjs.SpriteSheet(g);this.muteBtnSprite=new createjs.Sprite(h,"on"),this.view.addChild(this.muteBtnSprite),this.muteBtnSprite.addEventListener("click",function(){c.toggleSound(),c.playSounds?e.muteBtnSprite.gotoAndStop("on"):e.muteBtnSprite.gotoAndStop("mute")});var j=new i(i.LEVELS);j.view.x=100,this.view.addChild(j.view),j.view.addEventListener("click",function(){var b=new createjs.Event(a.LEVELS_CLICKED);e.view.dispatchEvent(b)}),b()}function b(){e.levelTxt.text="level: "+(e.level+1)}function d(){var b="time left: 00:";if(e.timeCount<10&&(b+="0"),b+=e.timeCount,e.timeTxt.text=b,e.timeCount--,e.timeCount<0){clearInterval(e.timer),e.timer=null;var c=new createjs.Event(a.TIME_OUT);e.view.dispatchEvent(c)}}var e;return a.prototype.setLevel=function(a){this.level=a,b()},a.prototype.levelUp=function(){this.level++,b()},a.prototype.levelDown=function(){this.level--,b()},a.prototype.increaseBounce=function(){this.bounces++,b()},a.prototype.earnTime=function(){this.timeCount+=10},a.prototype.resetStats=function(){clearInterval(this.timer),this.timer=null,this.timeCount=59,this.timer=setInterval(d,1e3),this.bounces=0,d()},a.prototype.getStars=function(){e.bounces<0&&(e.bounces=0);var a=3*Math.round((e.leafsCount-e.bounces)/e.leafsCount);return a>3?a=3:0>a&&(a=0),a},a}(),w=function(){function a(){c=this,a.MENU="MENU",a.PLAY_AGAIN="PLAY_AGAIN",this.width=352,this.height=234,this.view=new createjs.Container,this.container=new createjs.Container,this.container.regX=this.width/2,this.container.regY=this.height/2,this.container.x=F.canvas.width/2,this.container.y=F.canvas.height/2-35;var d=new createjs.Shape;d.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),d.graphics.drawRect(0,0,F.canvas.width,F.canvas.height),d.alpha=.5,this.view.addChild(d),this.view.addChild(this.container);var e=new createjs.Bitmap(I.getResult("failed-background"));this.container.addChild(e);var f=new i(i.FACEBOOK);f.view.x=260,f.view.y=50,f.view.y=f.view.y,this.container.addChild(f.view),f.view.on("click",b);var g=new i(i.PLAY_AGAIN);g.view.x=143,g.view.y=this.height+24,this.container.addChild(g.view),g.view.on("click",function(){var b=new createjs.Event(a.RESTART_LEVEL,!0);c.view.dispatchEvent(b)})}function b(){d(1,3)}var c;return a}(),x=function(){function a(c){d=this,a.INSTRUCTIONS_DONE="INSTRUCTIONS_DONE",this.instructionsData=c,this.currentInstruction=0,this.view=new createjs.Container;var e=new createjs.Shape;e.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),e.graphics.drawRect(0,0,F.canvas.width,F.canvas.height),e.alpha=.5,this.view.addChild(e),b(),this.view.cursor="pointer",this.view.addEventListener("click",function(){b()})}function b(){if(d.currentInstruction<d.instructionsData.length)c(),d.instructionImg=new createjs.Bitmap(I.getResult($(d.instructionsData[d.currentInstruction]).attr("img"))),d.view.addChild(d.instructionImg),console.log($(d.instructionsData[d.currentInstruction]).attr("img"));else{c();var b=new createjs.Event(a.INSTRUCTIONS_DONE,!0);d.view.dispatchEvent(b)}d.currentInstruction++}function c(){null!=d.instructionImg&&(d.view.removeChild(d.instructionImg),d.instructionImg=null)}var d;return a}(),y=function(){function a(a){d=this,this.gameData=a,this.view=new createjs.Container;var e=new createjs.Shape;e.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),e.graphics.drawRect(0,0,F.canvas.width,F.canvas.height),e.alpha=.5,this.view.addChild(e),$("body").on("keydown",function(a){49===a.which?b(0):50===a.which?b(1):222===a.which?b(2):53===a.which?b(3):54===a.which&&b(4)}),c()}function b(a){var b=new createjs.Event(u.LEVEL_SELECTED,!0);b.levelIndex=a,d.view.dispatchEvent(b)}function c(){var a=new createjs.Container;d.view.addChild(a);for(var b=0;b<this.gameData.getLevelCount();b++){var c=new u(b,this.gameData.gamerData.levels[b],!0);c.view.x=120*b,a.addChild(c.view)}a.x=300,a.y=200}var d;return a}(),z=function(){function a(d,e){c=this,a.NEXT_LEVEL="NEXT_LEVEL",a.PLAY_AGAIN="PLAY_AGAIN",this.screenType=C.NEXT_LEVEL,this.stars=e,this.level=d,this.width=351,this.height=233,this.view=new createjs.Container,this.container=new createjs.Container,this.container.regX=this.width/2,this.container.regY=this.height/2,this.container.x=F.canvas.width/2,this.container.y=F.canvas.height/2-35;var f=new createjs.Shape;f.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),f.graphics.drawRect(0,0,F.canvas.width,F.canvas.height),f.alpha=.5,this.view.addChild(f),this.view.addChild(this.container);var g=new createjs.Bitmap(I.getResult("success-background"));this.container.addChild(g);var h=new i(i.FACEBOOK);h.view.x=260,h.view.y=50,h.view.y=h.view.y,this.container.addChild(h.view),h.view.on("click",b);var j=new i(i.PLAY_AGAIN);j.view.x=143,j.view.y=this.height+24,this.container.addChild(j.view),j.view.on("click",function(){var b=new createjs.Event(a.PLAY_AGAIN,!0);c.view.dispatchEvent(b)});var k=new i(i.NEXT_LEVEL);k.view.x=265,k.view.y=j.view.y+10,this.container.addChild(k.view),k.view.on("click",function(){var b=new createjs.Event(a.NEXT_LEVEL,!0);c.view.dispatchEvent(b)});var l=new u(0,e,!0);this.container.addChild(l.view),l.view.x=125,l.view.y=20}function b(){d(c.level+1,c.stars)}var c;return a}(),A=function(){function a(){c=this,a.START="START",this.view=new createjs.Container;var d=new createjs.Shape;d.graphics.beginFill(createjs.Graphics.getRGB(200,200,200)),d.graphics.drawRect(0,0,F.canvas.width,F.canvas.height),this.view.addChild(d);var e=new i(i.START);this.view.addChild(e.view),e.view.addEventListener("click",b),e.view.x=F.canvas.width/2,e.view.y=F.canvas.height/2,$("body").on("keydown",function(a){83===a.which&&b(a)})}function b(){var b=new createjs.Event(a.START,!0);c.view.dispatchEvent(b)}var c;return a}(),B=function(){function a(){d=this,a.LOADING_DONE="LOADING_DONE",this.isPreloadingGame=!1,this.view=new createjs.Container,I=new createjs.LoadQueue,I.installPlugin(createjs.Sound),I.addEventListener("progress",d.handleProgress),I.addEventListener("complete",d.handleComplete),I.addEventListener("fileload",d.handleFileLoad),this.preloaderView=new createjs.Container;var b=new createjs.Shape;b.graphics.beginFill(createjs.Graphics.getRGB(0,0,0)),b.graphics.drawRect(0,0,F.canvas.width,F.canvas.height),b.alpha=.5,this.preloaderView.addChild(b),this.progressEgg=new createjs.Bitmap("assets/common/leaf.png"),this.progressEgg.regX=20.5,this.progressEgg.regY=28,this.progressEgg.x=F.canvas.width/2,this.progressEgg.y=F.canvas.height/2,this.preloaderView.addChild(this.progressEgg),this.removePreloaderTimeout=null}function b(){console.log(d.preloaderView.x,d.preloaderView.y),F.addChild(d.preloaderView)}function c(){d.removePreloaderTimeout=setTimeout(function(){F.removeChild(d.preloaderView),clearTimeout(d.removePreloaderTimeout),d.removePreloaderTimeout=null},1e3)}var d;return a.prototype.preloadGame=function(){b(),d.isPreloadingGame=!0;var a=[{src:"assets/common/succeed_1.png",id:"success-background"},{src:"assets/common/failed.png",id:"failed-background"},{src:"assets/common/time-coin.png",id:"time-coin"},{src:"assets/common/egg-spritesheet.png"},{src:"assets/common/leaf.png",id:"leaf"},{src:"assets/common/nest.png",id:"nest"},{src:"assets/common/twirl.png",id:"twirl"},{src:"assets/common/rock.png",id:"rock"},{src:"assets/common/stars-spritesheet.png"},{src:"assets/common/buttons/facebook.png"},{src:"assets/common/buttons/next_level.png"},{src:"assets/common/buttons/play_again.png"},{src:"assets/common/buttons/pause.png"},{src:"assets/common/buttons/levels.png"},{src:"assets/common/buttons/mute.png"},{src:"assets/sound/bounce.mp3",id:"bounce_sound"},{src:"assets/sound/coin.mp3|coin.ogg",id:"coin_sound"},{src:"assets/sound/music.mp3|music.ogg",id:"music"},{src:"assets/sound/gameover.mp3|gameover.ogg",id:"gameover_sound"},{src:"assets/sound/success.mp3|success.ogg",id:"success_sound"}];I.loadManifest(a,!0)},a.prototype.preloadLevel=function(a){b(),d.isPreloadingGame=!1,I.loadManifest(a,!0)},a.prototype.handleProgress=function(a){d.progressEgg.rotation=180*a.loaded},a.prototype.handleFileLoad=function(){},a.prototype.handleComplete=function(){c();var b=new createjs.Event(a.LOADING_DONE,!0);d.view.dispatchEvent(b)},a.prototype.handleError=function(a){console.log("[StartScreen] error preload!"+a)},a}(),C=function(){function a(){b=this,this.view=new createjs.Container,this.screen=null,a.GAME_OVER="GAME_OVER",a.INSTRUCTIONS="INSTRUCTIONS",a.NEXT_LEVEL="NEXT_LEVEL",a.LEVELS="LEVELS",a.START="START"}var b;return a.prototype.showScreen=function(c){null==this.screen&&(c===a.GAME_OVER?(this.screen=new w,this.screen.view.on(w.RESTART_LEVEL,function(){b.removeScreen()})):c===a.INSTRUCTIONS?this.screen=new x:c===a.START&&(this.screen=new A,this.screen.view.on(A.START,function(){b.removeScreen()})),this.view.addChild(this.screen.view))},a.prototype.showLevelsScreen=function(a){this.screen=new y(a),this.view.addChild(this.screen.view),this.screen.view.on(u.LEVEL_SELECTED,function(){b.removeScreen()})},a.prototype.showInstructionsScreen=function(a){this.screen=new x(a),this.view.addChild(this.screen.view),this.screen.view.on(x.INSTRUCTIONS_DONE,function(){b.removeScreen()})},a.prototype.showNextLevelScreen=function(a,c){this.screen=new z(a,c),this.view.addChild(this.screen.view),this.screen.view.on(z.NEXT_LEVEL,function(){b.removeScreen()}),this.screen.view.on(z.PLAY_AGAIN,function(){b.removeScreen()})},a.prototype.removeScreen=function(){null!=b.screen&&(b.view.removeChild(b.screen.view),b.screen=null)},a}();c.backgroundMusicInstance=null,c.playSounds=!0,c.toggleSound=function(){c.playSounds=!c.playSounds,c.playSounds?null===c.backgroundMusicInstance?c.backgroundMusicInstance=createjs.Sound.play("music",{interrupt:createjs.Sound.INTERRUPT_NONE,loop:-1,volume:.4}):c.backgroundMusicInstance.setMute(!1):null!==c.backgroundMusicInstance&&c.backgroundMusicInstance.setMute(!0)},c.startSounds=function(){null==c.backgroundMusicInstance&&this.toggleSound()},c.playBounce=function(){c.playSounds&&createjs.Sound.play("bounce_sound")},c.playGameOver=function(){c.playSounds&&createjs.Sound.play("gameover_sound")},c.playSuccess=function(){c.playSounds&&createjs.Sound.play("success_sound")},c.playCoinCatched=function(){c.playSounds&&createjs.Sound.play("coin_sound")};var D=function(){function a(a){c=this,this.xmlPath=a,this.gamerData=this.getStoredGamerData(),null==this.gamerData&&(this.gamerData=new E),console.log(this.gamerData)
}function b(){localStorage.setItem("tjilp_game",JSON.stringify(c.gamerData))}var c;return a.prototype.parse=function(){$.ajax({url:this.xmlPath,type:"GET",dataType:"xml",success:function(a){c.levelsData=a,$(c).trigger("parsed")}})},a.prototype.getLevelCount=function(){return c.levelsData.getElementsByTagName("levels")[0].childElementCount},a.prototype.getLevel=function(a){return c.levelsData.getElementsByTagName("levels")[0].getElementsByTagName("level")[a]},a.prototype.getEggDataForLevel=function(a){return this.getLevel(a).getElementsByTagName("egg")[0]},a.prototype.getLevelInstructionsForLevel=function(a){return this.getLevel(a).getElementsByTagName("instruction")},a.prototype.getManifestForLevel=function(a){var b=[];return $(this.getLevel(a)).find("*").each(function(a,c){null!=$(c).attr("img")&&b.push({src:$(c).attr("img")})}),b},a.prototype.getStoredGamerData=function(){var a=localStorage.getItem("tjilp_game");return"undefined"!==a?JSON.parse(a):null},a.prototype.didUserGetInstructionForLevel=function(a){return c.gamerData.givenInstructions?c.gamerData.givenInstructions[a]?!0:!1:!1},a.prototype.storeGamerLevelData=function(a,d){(null==this.gamerData.levels[a]||this.gamerData.levels[a]<d)&&(c.gamerData.levels[a]=d,b())},a.prototype.storeGamerInstructionGiven=function(a){c.gamerData.givenInstructions[a]=!0,b()},a}(),E=function(){function a(){this.name="Jonathan",this.id=2304958271,this.levels=[],this.givenInstructions=[]}return a}();window.fbAsyncInit=function(){FB.init({appId:"596243747091537",status:!0,cookie:!0,xfbml:!0})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document);var F,G,H,I,J={b2Vec2:Box2D.Common.Math.b2Vec2,b2BodyDef:Box2D.Dynamics.b2BodyDef,b2Body:Box2D.Dynamics.b2Body,b2FixtureDef:Box2D.Dynamics.b2FixtureDef,b2Fixture:Box2D.Dynamics.b2Fixture,b2World:Box2D.Dynamics.b2World,b2MassData:Box2D.Collision.Shapes.b2MassData,b2PolygonShape:Box2D.Collision.Shapes.b2PolygonShape,b2CircleShape:Box2D.Collision.Shapes.b2CircleShape,b2DebugDraw:Box2D.Dynamics.b2DebugDraw,b2DistanceJointDef:Box2D.Dynamics.Joints.b2DistanceJointDef,b2BuoyancyController:Box2D.Dynamics.Controllers.b2BuoyancyController},K=30;!function(){function a(){M=this,F=new createjs.Stage(document.getElementById("game")),F.enableMouseOver(),H=document.getElementById("debug"),this.width=F.canvas.width,this.height=F.canvas.height,this.levelStarted=!1,this.collisionDetected=!1,this.isPaused=!0,this.keypressCount=0,this.gameData=new D("data/game.xml"),$(this.gameData).on("parsed",d),this.gameData.parse(),b(),g()}function b(){G=new J.b2World(new J.b2Vec2(0,20),!0);var a=new J.b2DebugDraw;a.SetSprite(H.getContext("2d")),a.SetDrawScale(K),a.SetFillAlpha(.2),a.SetFlags(J.b2DebugDraw.e_shapeBit|J.b2DebugDraw.e_jointBit),G.SetDebugDraw(a);var b=new Box2D.Dynamics.b2ContactListener;b.BeginContact=function(a){M.gameContainer.handleBeginContact(a);var b=a.GetFixtureA().GetUserData(),d=a.GetFixtureB().GetUserData();"ground"===b||"ground"===d?M.collisionDetected||(r(),M.collisionDetected=!0):"rock"===b||"rock"===d?M.collisionDetected||(r(),M.collisionDetected=!0):"leaf"===b&&"bird"===d||"bird"===d&&"leaf"===b?M.collisionDetected||(c.playBounce(),M.stats.increaseBounce()):"top-nest"===b||"top-nest"===d?M.collisionDetected||(M.gameContainer.bird.rest({x:M.gameContainer.nest.view.x,y:M.gameContainer.nest.view.y}),s(),M.collisionDetected=!0):"tornado"===b||"tornado"===d?M.gameContainer.bird.tornadoFly():"enemyBird"===b||"enemyBird"===d?(r(),M.collisionDetected=!0):"balloon"===b||"balloon"===d?(r(),M.collisionDetected=!0):"miniTree"===b||"miniTree"===d?(r(),M.collisionDetected=!0):(-1!==b.indexOf("timeCoin")||-1!==d.indexOf("timeCoin"))&&(-1!==b.indexOf("timeCoin")?M.gameContainer.removeTimeCoinWithUserData(b):M.gameContainer.removeTimeCoinWithUserData(d),M.gameContainer.view.addEventListener(e.COIN_REMOVED,I))},b.EndContact=function(a){M.gameContainer.handleEndContact(a)},G.SetContactListener(b)}function d(){M.preloadManager=new B,M.preloadManager.view.addEventListener(B.LOADING_DONE,f),M.preloadManager.preloadGame()}function f(){if(M.preloadManager.isPreloadingGame)j(),i(),m();else{var a=M.gameData.getLevelInstructionsForLevel(M.stats.level);a.length>0&&!M.gameData.didUserGetInstructionForLevel(M.stats.level)?(j(),p(a)):q()}}function g(){createjs.Ticker.addEventListener("tick",L),createjs.Ticker.setFPS(60),createjs.Ticker.useRAF=!0,$(document).on("keydown",function(a){a.which>=37&&a.which<=39&&(M.keypressCount++,M.keypressCount>3)||(32===a.which?E():39===a.which?M.gameContainer.bird.moveRight():37===a.which?M.gameContainer.bird.moveLeft():38===a.which&&M.gameContainer.bird.fly())}),$(document).on("keyup",function(){M.keypressCount=0})}function i(){null==this.stats&&k(),null==this.screenManager&&l()}function j(){M.levelStarted=!1,null==M.gameContainer&&(this.gameContainer=new e,F.addChild(this.gameContainer.view)),this.gameContainer.resetContainer();var a=0;null!=M.stats&&(a=M.gameData.getLevel(M.stats.level),M.stats.leafsCount=$(a).find("leaf").length),$(a).find("background").each(function(a,b){0>=a?$("#game").css("background-image","url("+$(b).attr("img")+")"):M.gameContainer.createBackground($(b).attr("img"))}),$(a).find("ground").each(function(a,b){M.gameContainer.createGround($(b).attr("img"),M.width/2,M.height-parseInt($(b).attr("height")),M.width,parseInt($(b).attr("height")))}),$(a).find("tree").each(function(a,b){M.gameContainer.createTree($(b).attr("img"),$(b).attr("x"),$(b).attr("width"),$(b).attr("height"))}),$(a).find("leaf").each(function(a,b){M.gameContainer.createLeaf($(b).attr("x"),$(b).attr("y"),$(b).attr("rotation"),$(b).attr("restitution"))}),$(a).find("rock").each(function(a,b){M.gameContainer.createRock($(b).attr("img"),$(b).attr("x"),$(b).attr("y"),$(b).attr("width"),$(b).attr("height"))}),$(a).find("tornado").each(function(a,b){M.gameContainer.createTornado($(b).attr("x"),$(b).attr("y"))}),$(a).find("enemyBird").each(function(a,b){M.gameContainer.createEnemyBird($(b).attr("img"),$(b).attr("x"),$(b).attr("y"),$(b).attr("direction"))}),$(a).find("balloon").each(function(a,b){M.gameContainer.createBalloon($(b).attr("img"),$(b).attr("x"),$(b).attr("y"),$(b).attr("direction"))}),$(a).find("egg").each(function(a,b){M.gameContainer.createBird($(b).attr("x"),$(b).attr("y")),M.gameContainer.bird.setMaxRotations(M.gameData.getEggDataForLevel(M.stats.level).getAttribute("maxRotations")),M.gameContainer.bird.setEvolution(M.gameData.getEggDataForLevel(M.stats.level).getAttribute("evolution"))}),$(a).find("nest").each(function(a,b){M.gameContainer.createNest($(b).attr("x"),$(b).attr("y"))}),$(a).find("miniTree").each(function(a,b){M.gameContainer.createMiniTree($(b).attr("img"),$(b).attr("x"))}),$(a).find("cloud").each(function(a,b){M.gameContainer.createCloud($(b).attr("img"),$(b).attr("x"),$(b).attr("y"))}),$(a).find("timeCoin").each(function(a,b){M.gameContainer.createTimeCoin($(b).attr("x"),$(b).attr("y"),$(b).attr("worth"),a)})}function k(){this.stats=new v(20,20),this.stats.view.addEventListener(v.LEVELS_CLICKED,n),this.stats.view.addEventListener(v.TIME_OUT,r),F.addChild(this.stats.view)}function l(){this.screenManager=new C,F.addChild(this.screenManager.view)}function m(){M.screenManager.showScreen(C.START),M.screenManager.view.addEventListener(A.START,function(){n()})}function n(){M.isPaused=!0,M.screenManager.showLevelsScreen(M.gameData),M.screenManager.view.addEventListener(u.LEVEL_SELECTED,function(a){M.stats.setLevel(a.levelIndex),o(a.levelIndex)})}function o(a){M.preloadManager.preloadLevel(M.gameData.getManifestForLevel(a))}function p(a){console.log(a),M.isPaused=!0,M.screenManager.showInstructionsScreen(a),M.screenManager.view.addEventListener(x.INSTRUCTIONS_DONE,function(){M.gameData.storeGamerInstructionGiven(M.stats.level),q()})}function q(){j(),M.isPaused=!1,M.collisionDetected=!1,M.stats.resetStats(),c.startSounds()}function r(){M.isPaused||(c.playGameOver(),M.screenManager.showScreen(C.GAME_OVER),M.screenManager.view.addEventListener(w.RESTART_LEVEL,t),M.isPaused=!0)}function s(){M.isPaused||(c.playSuccess(),M.gameData.storeGamerLevelData(this.stats.level,this.stats.getStars()),M.isPaused=!0,M.screenManager.showNextLevelScreen(this.stats.level,this.stats.getStars()),M.screenManager.view.addEventListener(z.NEXT_LEVEL,y),M.screenManager.view.addEventListener(z.PLAY_AGAIN,t))}function t(){q(),M.isPaused=!1,M.collisionDetected=!1}function y(){M.stats.levelUp(),o(M.stats.level)}function E(){M.levelStarted||M.isPaused||(this.gameContainer.bird.push(),this.gameContainer.bird.view.addEventListener(h.DIED,function(){r()}),M.levelStarted=!0)}function I(){M.stats.earnTime(),M.gameContainer.view.removeEventListener(e.COIN_REMOVED,I),c.playCoinCatched()}function L(){F.update(),G.DrawDebugData(),G.Step(1/60,10,10),G.ClearForces()}var M;a()}()}({},function(){return this}());